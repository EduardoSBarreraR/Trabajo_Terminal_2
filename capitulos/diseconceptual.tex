% !TeX encoding = ISO-8859-1
\chapter{Diseño}

\section{Diseño del sistema}

A lo largo de este capítulo se establecen las necesidades que el sistema mecatrónico debe satisfacer, para posteriormente determinar las funciones a realizar y los módulos que forman parte del concepto de solución, el cual se elige a través de la implementación de una herramienta de selección multicriterio.

\subsection{Necesidades y requerimientos}

Para dar comienzo con el diseño del sistema, es preciso determinar cuales son las \textbf{necesidades}\cite{Trazabilidad} que debe satisfacer, las cuales son el resultado de la \textit{transformación} de uno o más conceptos en una \textit{expectativa} para el cumplimiento de una \textit{función} de acuerdo a ciertos indicadores de \textit{rendimiento} que aseguren la \textit{calidad}. La Tabla \ref{Tabla:TabNec} asocia las necesidades establecidas con un identficador, el cual será útil para identificarlas rápidamente a lo largo del proceso de diseño. 

\begin{table}
\centering
\caption{Necesidades que el sistema debe cumplir}
\begin{scriptsize}
\begin{tabular}{|c|c|}
\hline
\textbf{Identificador} & \textbf{Necesidad}                                                                                                          \\ \hline
N1                     & Tomar la muestra desde su posición de origen.                                                                               \\ \hline
N2                     & \begin{tabular}[c]{@{}c@{}}Ser capaz de trabajar en las condiciones ambientales determinadas para la\\ misión.\end{tabular} \\ \hline
N3                     & Obtener datos de la muestra.                                                                                                \\ \hline
N4                     & Enviar datos.                                                                                                               \\ \hline
N5                     & Recibir instrucciones.                                                                                                      \\ \hline
N6                     & Ser ligero.                                                                                                                 \\ \hline
N7                     & No desequilibrar al \textit{rover}.                                                                                                  \\ \hline
N8                     & Tener dimensiones reducidas.                                                                                                \\ \hline
N9                     & Trabajar bajo el sol.                                                                                                       \\ \hline
N10                    & Consumir poca energía.                                                                                                      \\ \hline
\end{tabular}
\end{scriptsize}
\label{Tabla:TabNec}
\end{table}

Una vez que se han establecido las necesidades que el sistema debe satisfacer, es posible establecer los \textbf{requerimientos}\cite{Trazabilidad} técnicos que  componen las espeficaciones del mismo, pues estos son el resultado de transformar las necesidades en una obligación para cumplir cierta función dentro de las cotas establecidas, de manera análoga a la Tabla \ref{Tabla:TabNec} correspondiente a las necesidades, la Tabla \ref{Tabla:TabReq} asocia cada requerimiento con un identificador.

\begin{table}
\centering
\caption{Requerimientos técnicos del sistema}
\begin{scriptsize}
\begin{tabular}{|c|c|c|}
\hline
\textbf{Identificador} & \textbf{Requerimiento}               & \textbf{Valor}                   \\ \hline
R1                     & Masa máxima de la muestra            & 100 g                            \\ \hline
R2                     & Diámetro máximo de la muestra        & 5 cm                             \\ \hline
R3                     & Esfericidad                          & Media a alta                     \\ \hline
R4                     & Angularidad     & Sub-angular a bien redondeada    \\ \hline
R5                     & Masa máxima del sistema              & 12 kg                            \\ \hline
R6                     & Envergadura máxima                   & 1.5 m                            \\ \hline
R7                     & Alimentación máxima                         & 24 V                        \\ \hline
R8                     & Resolución mínima de masa de muestra & 1 g                              \\ \hline
R9                     & Rango de comunicación                & Entre 2 y 10 m                   \\ \hline
R10                    & Área de recolección                  & $1m^{2}$                         \\ \hline
R11                    & Temperatura de trabajo               & $5^{\circ}C<t_{amb}<25^{\circ}C$ \\ \hline
R12                    & Humedad del ambiente                 & $20\%<h_{amb}<70\%)$             \\ \hline
R13                    & Tiempo de ciclos de operación & 10 min                           \\ \hline
\end{tabular}
\end{scriptsize}
\label{Tabla:TabReq}
\end{table}

\subsubsection*{Validación de requerimientos}
Para evaluar si los requerimientos cubren todas las necesidades establecidas, se utiliza la matriz de trazabilidad\cite{Trazabilidad}.

La Tabla \ref{Tabla:TrazaReq} contiene las necesidades en las columnas y las filas representan los requerimientos derivados. Con el fin de comprobar que todas las necesidades se satisface, es importante que cada una esté asociada al menos a un requerimiento.

Para llevar la muestra de su lugar de origen al lugar de análisis (N1), es necesario tomar en cuenta las características físicas de la misma, como son, masa(R1), diámetro (R2), esfericidad\cite{Esfericidad}(R3), angularidad\cite{Esfericidad}(R4), además de la destreza del sistema (R6 y R10).

Para asegurar que el sistema es capaz de trabajar en el ambiente determinado (N2), se deben conocer la temperatura y humedad del mismo (R11 y R12), así como el tiempo de operación (R13).

Debido a que el sistema está diseñado para analizar piedras pequeñas (N3), es necesario que sea capaz de medir la masa de manera precisa (R8).

Para que el sistema sea capaz de trabajar de manera remota (N4 y N5), es necesario establecer cotas de distancia (R9).

La necesidad 6 se asocia directamente con un límite de masa (R5).

Los límites de masa y dimensiones (R5 y R6) garantizan que las reacciones generadas no vuelquen al ``\textit{rover}''(N7).

La necesidad 8 se asocia directamente con un límite de longitud (R6).

El sistema debe ser capaz de trabajar en las condiciones típicas (R11 y R12) de un ambiente a la intemperie (N9).

Para asegurar un bajo consumo de energía, se deben establecer límites a la masa de la muestra a tomar (R1), el peso propio del sistema (R5), las dimensiones del manipulador (R6), la energía disponible (R7), y el tiempo en que se puede operar(R13).

\begin{table}
\centering
\caption{Matriz de trazabilidad para la validación de requerimientos respecto a necesidades}
\begin{scriptsize}
\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|}
\cline{2-11}
                          & N1                    & N2                              & N3                    & N4                    & N5                    & N6                    & N7                    & N8                    & N9                    & N10        \\ \hline
\multicolumn{1}{|c|}{R1}  &\Checkmark            &                                 &                       &                       &                       &                       &                       &                       &                       & \Checkmark \\ \hline
\multicolumn{1}{|c|}{R2}  & \Checkmark            &                                 &                       &                       &                       &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R3}  & \Checkmark            &                                 &                       &                       &                       &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R4}  & \Checkmark            &                                 &                       &                       &                       &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R5}  &                       &                                 &                       &                       &                       & \Checkmark            & \Checkmark            &                       &                       & \Checkmark \\ \hline
\multicolumn{1}{|c|}{R6}  & \Checkmark            &                                 &                       &                       &                       &                       & \Checkmark            & \Checkmark            &                       & \Checkmark \\ \hline
\multicolumn{1}{|c|}{R7}  &                       &                                 &                       &                       &                       &                       &                       &                       &                       & \Checkmark \\ \hline
\multicolumn{1}{|c|}{R8}  &                       &                                 & \Checkmark            &                       &                       &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R9}  &                       &                                 &                       & \Checkmark            & \Checkmark            &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R10} & \Checkmark            &                                 &                       &                       &                       &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R11} &                       & \Checkmark                      &                       &                       &                       &                       &                       &                       & \Checkmark            &            \\ \hline
\multicolumn{1}{|c|}{R12} &                       & \Checkmark                      &                       &                       &                       &                       &                       &                       &                       &            \\ \hline
\multicolumn{1}{|c|}{R13} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{} & \multicolumn{1}{c|}{} & \Checkmark \\ \hline
\end{tabular}
\end{scriptsize}
\label{Tabla:TrazaReq}
\end{table}

\subsection{Arquitectura funcional}

En esta sección se lleva a cabo la descomposición de \textbf{funciones}, dividiendo la función general, la cual describe el comportamiento del sistema, en funciones secundarias inherentes al mismo, así como las funciones genéricas, que pueden asociarse a la mayoría de sistemas.

Una vez que se han determinado los requerimientos principales, es posible establecer la función general, cuyo objetivo es describir el funcionamiento que tiene
el sistema; posteriormente, se debe realizar una descomposición de la función principal en subfunciones que realicen una tarea en específico
a modo de que sea más sencillo comprender los problemas a los que el diseñador debe
enfrentarse.
Una forma de realizar esta descomposición es utilizar una herramienta denominada FBS\cite{FBS}
(\textit{Functional Breakdown Structure} por sus siglas en inglés), mostrada en la Figura \ref{fig:FBS}, la cual permite ver las funciones que desempeña el sistema de una manera organizada y jerárquica, las cuales se enlistan a continuación.

\begin{figure}
	\centering		
	\includegraphics[scale=0.55]{imagenes/Modelos/FBS.pdf}
	\caption{Desglose gráfico de funciones a través de un modelo FBS}
	\label{fig:FBS}
\end{figure}


\subsubsection*{Validación de funciones}
La Tabla \ref{Tabla:TrazaFun} muestra las relaciones existentes entre las funciones y los requerimientos.

Para el traslado de una muestra con las características especificadas en los requerimientos R1, R2, R3 y R4, es necesario que el sistema se posicione y oriente de manera que pueda tomar la muestra de su origen (f1.1 y f1.2), y posteriormente depositarla en el área de análisis (f1.3). Una vez que hayan obtenido los datos de la misma (f3.3), sea devuelta al entorno (f1.4).

En general, es deseable que un sistema gaste la menor cantidad de energía posible (f2.1), siendo la reducción del peso una forma de conseguirlo (R5).

Las funciones de posicionamiento y orientación (f1.1 y f1.2) son realizadas dentro de las cotas establecidas en los requerimientos R6 y R10, que hablan sobre el alcance máximo del brazo y el área de recolección respectivamente,  el cual recibe las coordenadas del objetivo mediante el sistema de percepción (f3.4).

Para cumplir con la función general, utilizando la energía disponible descrita en el requerimiento R7, son implementadas las funciones de gestión energética (f2.1 y f2.2), así como la toma de decisiones basada en el nivel de energía disponible (f3.1), el cual se toma del sistema energético general que incluye al rover (f3.2.2.2).

Para obtener una medición confiable de la muestra (R8), es necesario contar con un sistema de medición adecuado (f3.3).

Una comunicación remota(R9) se consigue al transmitir datos de manera bidireccional entre el usuario y el sistema (f3.2.2.1), los cuales se encuentran alejados uno del otro.

El área de recolección (R10) es aquella definida por los puntos en el espacio que el sistema puede alcanzar mediante las operaciones de posición y orientación del manipulador (f1.1 y f1.2).

Para determinar los modos de operación (f3.1), es necesario que el sistema obtenga los parámetros del entorno (R11 y R12) mediante un sistema de percepción (f3.4), el cual comunicará los datos obtenidos (f3.2.1).

Conocer el nivel de energía disponible (f3.2.1), permite saber si es posible realizar la función general (f2.1 y f3.1) para que, en caso negativo, se notifique al usuario (f3.2.2.1).

\begin{table}
\centering
\caption{Matriz de trazabilidad para la validación de funciones respecto a requerimientos}
\begin{scriptsize}
\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|c|c|c|}
\cline{2-14}
                           	& \multicolumn{1}{c|}{R1} & \multicolumn{1}{c|}{R2} & \multicolumn{1}{c|}{R3} & \multicolumn{1}{c|}{R4} & \multicolumn{1}{c|}{R5} & \multicolumn{1}{c|}{R6} & \multicolumn{1}{c|}{R7} & \multicolumn{1}{c|}{R8} & \multicolumn{1}{c|}{R9} & \multicolumn{1}{c|}{R10} & \multicolumn{1}{c|}{R11} & \multicolumn{1}{c|}{R12} & R13 \\ \hline
\multicolumn{1}{|c|}{f1.1} 	& \Checkmark                  	&                     	&                     	&                     	&                     	& \Checkmark                   	&                     	&                     	&                     	& \Checkmark                    	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f1.2} 	& \Checkmark                    	&                     	&                     	&                     	&                     	& \Checkmark                   	&                     	&                     	&                     	& \Checkmark                   	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f1.3} 	& \Checkmark                   	& \Checkmark                   	& \Checkmark                   	& \Checkmark                   	&                     	&                     	&                     	&                     	&                     	&                      	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f1.4} 	& \Checkmark                   	& \Checkmark                   	& \Checkmark                   	& \Checkmark                   	&                     	&                     	&                     	&                     	&                     	&                      	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f2.1} 	&                     	&                     	&                     	&                     	&        \Checkmark             	&                     	& \Checkmark                  	&                     	&                     	&                      	&                      	&                      	& \Checkmark   \\ \hline
\multicolumn{1}{|c|}{f2.2} 	&                     	&                     	&                     	&                     	&                     	&                     	& \Checkmark                   	&                     	&                     	&                      	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f3.1} 	&                     	&                    	&                     	&                     	&                     	&                     	& \Checkmark                   	&                     	&                     	&                      	& \Checkmark                    	& \Checkmark                    	& \Checkmark   \\ \hline
\multicolumn{1}{|c|}{f3.2.1}   &                     	&                     	&                     	&                     	&                     	&                     	&                     	&                     	&                     	&                      	& \Checkmark                    	& \Checkmark                    	& \Checkmark   \\ \hline
\multicolumn{1}{|c|}{f3.2.2.1} &                     	&                     	&                     	&                     	&                     	&                     	&                     	&                     	& \Checkmark                   	&                      	&                      	&                      	&\Checkmark   \\ \hline
\multicolumn{1}{|c|}{f3.2.2.2} &                     	&                     	&                     	&                     	&                     	&                     	& \Checkmark                   	&                     	&                     	&                      	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f3.3} 	&   \Checkmark                  	& \Checkmark                   	& \Checkmark                   	& \Checkmark                   	&  	&                     	&                     	& \Checkmark                   	&                     	&                      	&                      	&                      	& 	\\ \hline
\multicolumn{1}{|c|}{f3.4} 	& \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{}   & \multicolumn{1}{c|}{\Checkmark}   & \multicolumn{1}{c|}{\Checkmark}   & \multicolumn{1}{c|}{\Checkmark}   & 	\\ \hline
\end{tabular}
\end{scriptsize}
\label{Tabla:TrazaFun}
\end{table}

Una vez que se han determinado las funciones que desempeña el sistema, es posible
definir los \textbf{módulos} que lo componen, con el objetivo de dar solución a problemas
específicos. Para ello resulta útil determinar la relación existente entre las mismas a través del modelo IDEF-0\cite{IDEF0}. El modelo del nodo A0 expandido, mostrado en la Figura \ref{fig:IDEF0A0E} permite dimensionar la complejidad del proyecto, facilitando la comprensión del comportamiento del sistema y por ende, la búsqueda de posibles soluciones. 


\begin{landscape}
	\begin{figure}[p]
		\centering		
		\includegraphics[width=1.5\textwidth ,height=\textheight, trim=4 4 4 4,clip]{imagenes/Modelos/IDEF0.pdf}
		\caption{Modelo IDEF0 del sistema}
		\label{fig:IDEF0A0E}
	\end{figure}
\end{landscape}


Así mismo, resulta de gran utilidad analizar el comportamiento del sistema mediante la ejecución de las funciones. Esto permite observar como cada función contribuye al cumplimiento de la función principal del sistema y como se relacionan entre si, identificando las condiciones que cada una necesita para ejecutarse, mostrando la interacción entre las entradas y salidas a lo largo de las transformaciones realizadas. 
Para ello se utiliza el modelo mostrado en la Figura \ref{fig:eFFBD}, el cual es un diagrama a bloques mejorado del flujo de funciones (\textit{eFFBD - enhanced Function Flow Block Diagram} por sus siglas en inglés)\cite{eFFBD}. Este modelo permite observar que la comunicación y la administración energética permanecen activas hasta que el sistema sea desactivado, mientras que para que se realice la función general, es necesario que el usuario lo ordene, pues de lo contrario el proceso nunca dará inicio. Por otro lado, el sistema evalúa las condiciones de trabajo actuales, tanto externas como internas, y con base en ellas decide la acción a realizar, ya sea quedarse en la posición de reposo o la toma de la muestra, cuyo proceso se realiza a través del posicionamiento y orientación del sistema robótico hacia la ubicación de la muestra en el entorno, seguido del traslado al laboratorio, el cual, tras obtener información de ella la devuelve al ambiente.


\begin{landscape}
	\begin{figure}[p]
		\centering		
		\includegraphics[width=1.55\textwidth ,height=0.85\textheight, trim=4 4 4 4,clip]{imagenes/Modelos/eFFBD.pdf}
		\caption{Modelo mejorado del diagrama a bloques de flujo funcional}
		\label{fig:eFFBD}
	\end{figure}
\end{landscape}


\subsection{Arquitectura física}

Una vez que se ha analizado el comportamiento del sistema mediante las funciones y la relación existente entre ellas, es posible deducir los elementos físicos que las lleven a cabo, los cuales pueden agruparse en los siguientes sistemas con sus correspondientes módulos.

\begin{itemize}
\item[S1] Robótico.
	\begin{itemize}[noitemsep,nolistsep]
	\item[M1] Manipulador: Un brazo de 3 grados de libertad (GDL) más una muñeca esférica de 3 GDL que realizará la función de posicionar y orientar al efector final, con el objetivo de trasladar la muestra.
	\item[M2] Efector final: Herramienta colocada en el extremo del manipulador capaz de sujetar la muestra.
	\end{itemize}

\item[S2] Información
	\begin{itemize}[noitemsep,nolistsep]
	\item[M3] Percepción: Sensores que le permitirán al sistema obtener información de sí mismo y de su entorno con el fin de conocer los parámetros necesarios para tomar decisiones.
	\item[M4] Comunicación: Elementos que permitan realizar la transmisión y recepción de información.
	\item[M5] Procesamiento: Componentes electrónicos que permitan analizar la información, tomar decisiones y enviar órdenes.
	\end{itemize}
\item[S3] Administración energética: Fuente de alimentación y circuitos que adapten la energía de acuerdo a las necesidades de cada componente.
\item[S4] Laboratorio
	\begin{itemize}[noitemsep,nolistsep]
	\item[M6] Obtención de datos de la muestra: Sensores que le permitirán al sistema obtener información de la muestra de interés.
	\item[M7] Desechador: Mecanismo encargado de expulsar la muestra del sistema.
	\end{itemize}
\item[S5] Estructural: Soporte y protección para los componentes que conforman el sistema.
\end{itemize}

\subsubsection*{Validación de módulos}

La Tabla \ref{Tabla:TrazaMod} muestra la matriz de trazabilidad utilizada para validar los módulos propuestos al comprobar que cada una de las funciones es realizada por algún módulo, y que cada módulo cumple al menos una función.

En primer lugar, se puede apreciar fácilmente que S3 y S5 están presentes en todas las funciones, pues para que sean realizadas, es fundamental que cuenten con la energía necesaria, además de que el sistema debe ensamblarse de manera integral.

Las funciones de posicionamiento y orientación(f1.1 y f1.2) se llevan a cabo a través del manipulador M1, el cual recibe las coordenadas del objetivo en el espacio tridimensional mediante M3, el cual envía los datos a M5 para que haga los cálculos necesarios de cinemática inversa y control.

El efector final M2 toma la muestra de su posición original y la deposita en el área de análisis (f1.3), mediante las funciones de posicionamiento y orientación (f1.1 y f1.2).

La muestra se devuelve al entorno (f1.4) mediante M7, el cual es controlado por M5.

Para seleccionar el modo de operación (f3.1), se utiliza la información provista por M3 sobre la condiciones del ambiente, y M5 sobre la energía disponible.

Para que el sistema pueda realizar la función general, es necesario que haya comunicación (M4) entre todos sus sistemas y módulos (f3.2.1), para que se puedan realizar las tomas de decisiones, y además, informar al usuario(f3.2.2.1) sobre los datos obtenidos (M6) y los problemas que se presenten (M3).	

La interacción con el rover (f3.2.2.2) se realiza mediante M4, para recibir de éste el nivel de energía disponible.

Los datos físicos de la muestra se obtienen (f3.3) a través de M6, y su posición a través de M3. 

Las condiciones del entorno se obtienen a través de M3.

\begin{table}
\centering
\caption{Matriz de trazabilidad para la validación de módulos respecto a funciones}
\begin{scriptsize}
\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|c|c|}
\cline{2-13}
                     	& f1.1                                       	& f1.2                                       	& f1.3                                       	& f1.4                                       	& f2.1                                       	& f2.2                                       	& f3.1                                       	& f3.2.1                                     	& f3.2.2.1                                   	& f.3.2.2                                    	& f3.3                                       	& f3.4                                       	\\ \hline
\multicolumn{1}{|c|}{M1} & \Checkmark                  	&                                            	& \Checkmark                  	&                                            	&                                            	&                                            	&                   	&                                            	&                                            	&                                            	&                                            	&                                            	\\ \hline
\multicolumn{1}{|c|}{M2} &                                            	& \Checkmark                  	& \Checkmark                  	&                                            	&                                            	&                                            	&                 	&                                            	&                                            	&                                            	&                                            	&                                            	\\ \hline
\multicolumn{1}{|c|}{M3} & \Checkmark                  	& \Checkmark                  	& \Checkmark                  	&                                            	&                                            	&                                            	&   \Checkmark                                         	&   \Checkmark                                         	&   \Checkmark                                        	&                                            	& \Checkmark                  	& \Checkmark                  	\\ \hline
\multicolumn{1}{|c|}{M4} &                                            	&                                            	&                                            	&                                            	&                                            	&                                            	&                                            	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                                           	&                                            	\\ \hline
\multicolumn{1}{|c|}{M5} & \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	&                                            	&                                            	& \Checkmark                  	&                                            	&                                            	&                                            	&                                            	&                                            	\\ \hline
\multicolumn{1}{|c|}{S3} & \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	& \Checkmark                  	\\ \hline
\multicolumn{1}{|c|}{M6} & \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{}                      	\\ \hline
\multicolumn{1}{|c|}{M7} & \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	& \multicolumn{1}{c|}{}                      	\\ \hline
\multicolumn{1}{|c|}{S5} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} & \multicolumn{1}{c|}{\Checkmark} \\ \hline
\end{tabular}
\end{scriptsize}
\label{Tabla:TrazaMod}
\end{table}

Una vez que se han validado los módulos es útil comenzar a agruparlos en sistemas, para la cual se utiliza un diagrama de bloques que describe gráficamente a la \textit{Arquitectura física}\cite{Buede}, de manera que resulte más sencillo analizar la interacción entre estos para dar paso a la búsqueda de soluciones.

La Figura \ref{fig:ArqFis}, correspondiente a la Arquitectura Física, muestra como el sistema estructural se encarga de integrar el resto de sistema y módulos para que trabajen en conjunto.El sistema de información se conforma del módulo de percepción, el cual obtiene datos de las condiciones internas y externas al sistema; el módulo de comunicación, controlando el tráfico de datos; y por último el módulo de procesamiento, el cual se encarga de recibir los datos, interpretarlos, tomar decisiones con base en ellos y, finalmente, emitir órdenes al resto de módulos. El sistema robótico se compone del efector, que es la herramienta que permite sujetar y soltar la muestra, y del manipulador, que consta de un brazo articulado de 3 GDL para posicionar el efector, y de una muñeca esférica para orientarlo. El sistema energético suministra de energía a todo el sistema, adaptándola a las específicas de cada uno. Finalmente el laboratorio se compone del módulo de obtención de datos, y del desechador, que devuelve la muestra al ambiente una vez que ha sido analizada.


\begin{landscape}
	\begin{figure}[p]
		\centering		
		\includegraphics[width=1.5\textwidth ,height=0.8\textheight, trim=4 4 4 4,clip]{imagenes/Modelos/Arquitectura fisica.pdf}
		\caption{Arquitectura física que muestra la interacción de los sistemas y módulos}
		\label{fig:ArqFis}
	\end{figure}
\end{landscape}


\subsection{Concepto solución}

Una vez que se han determinado los módulos que compondrán el sistema completo, es posible comenzar a proponer soluciones específicas para cada uno, las cuales serán sometidas a un proceso de selección utlizando una herramienta de selección multicriterio. 

La Figura \ref{fig:ConceptoS} muestra los modelos tridimensionales de las soluciones propuestas. Estas soluciones comparten diversos aspectos, como son: 1) Una estructura similar a la de un rover, 2) Un brazo de 6 GDL, 3) Batería como fuente de alimentación, 4) Sensores de temperatura y 5) Cámaras en la parte frontal de la estructura.

El concepto 1 (Figura \ref{fig:ConceptoS}a) tiene un brazo construido de placas paralelas, un gripper con forma de pinza de 2 dedos como efector final, un laboratorio con un cono en la parte superior para guiar la caída de la muestra, y circuitos electrónicos apilados y colocados en el centro de la estructura.

El concepto 2 (Figura \ref{fig:ConceptoS}b) tiene eslabones tubulares, y un efector final similar a los presentes en las excavadoras. Los circuitos también se encuentran apilados y se ubican en la esquina superior derecha (desde la vista frontal), mientras que el laboratorio está en la esquina superior izquierda.

El concepto 3 (Figura \ref{fig:ConceptoS}c) cambia en el laboratorio, el cual es un tubo que desliza la muestra hacia la zona de análisis y después a un agujero que la deja caer. El efector final es un gripper de 3 dedos.

El concepto 4 (Figura \ref{fig:ConceptoS}d) ubica el laboratorio en el centro del lado izquiedo de la estructura. Los circuitos están ubicados lado a lado. El brazo se conforma de eslabones de placas paralelas ranuradas y los actuadores se colocan en una sola base ubicada en la parte frontal.

El concepto 5 (Figura \ref{fig:ConceptoS}e) contiene los mismos elementos que el concepto 1 a excepción del efector final, además de que cambian las ubicaciones de los mismos.

El concepto 6 (Figura \ref{fig:ConceptoS}f) contempla los eslabones ranurados y la base se ubica en una esquina, además el laboratorio está conformado por una placa que tiene la zona de análisis, la cual se inclina para que la muestra se deslice hacia un agujero que la deja caer.


% \textbf{Nota: } Los modelos mostrados en la Figura \ref{fig:Concepto1}, \ref{fig:Concepto3}, \ref{fig:Concepto4}, \ref{fig:Concepto5} y \ref{fig:Concepto6} contemplan un recubrimiento protector a los componentes internos (tales como actuadores y transmisiones, entre otros), con el fin de que los aísle de las condiciones hostiles del ambiente, sin reducir su movilidad.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Conceptos/Concepto 1 con etiquetas.png}}
			{a}
		&
		\subf{\includegraphics[width=0.4\textwidth, keepaspectratio]{imagenes/Conceptos/Concepto 2 con etiquetas.jpg}}
			{b}
		\\
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Conceptos/Concepto 3 con etiquetas.jpg}}
			{c}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Conceptos/Concepto 4 con etiquetas.png}}
			{d}
		\\
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Conceptos/Concepto 5 con etiquetas.png}}
			{e}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Conceptos/Concepto 6 con etiquetas.png}}
			{f}
		\\
	\end{tabular}
	\caption{Conceptos solución}
	\label{fig:ConceptoS}
\end{figure}

Con el objetivo de determinar cuál es la propuesta que mejor se desempeña en la realización de las funciones, se utiliza una herramienta de selección multicriterio denominada \textit{Proceso analítico de jerarquía}, (\textit{Analytic Hierarchy Process} - AHP por sus siglas en inglés)\cite{AHP}; la cual se ayuda de criterios originados a partir del análisis de las diferencias que hay entre ellas, los cuales se muestran en el Apéndice \ref{Ap:AHP}.

El proceso de selección comienza con una tabla en la que se compara la importancia de cada criterio contra el resto en una relación de 1:1, obteniendo el llamado ``vector de prioridad'', en el cuál se establece la jerarquía de los criterios, como se muestra en el gráfico de la Figura \ref{fig:AHPJerDes}a, en la cual se puede apreciar que el criterio 13 (Riesgo de daños a la muestra) es el más importante, seguido por el criterio 4 (Riesgo de daños a la estructura).

Para determinar cual es el concepto que mejor satisface las necesidades, se compara uno a uno el nivel en el que se desmpeña en cada criterio.

De esta manera, para cada criterio se obtiene un concepto que destaca, y posteriormente se relaciona el desempeño en cada criterio con la importancia de este, encontrando el valor de desempeño general de cada concepto, como muestra la Figura \ref{fig:AHPJerDes}b, donde se observa que el mayor valor pertenece al concepto número 5, presentado en la Figura \ref{fig:ConceptoS}e.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Seleccion de concepto/VPCriterios.pdf}}
			{a}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Seleccion de concepto/Ganador.pdf}}
			{b}
		\\
	\end{tabular}
	\caption{AHP a) Jerarquía de criterios; b) Desempeño general de los conceptos }
	\label{fig:AHPJerDes}
\end{figure}

El proceso completo se encuentra en el Apéndice \ref{Ap:AHP}.

\subsection{Concepto Final}

A pesar de que el concepto número 5 es el concepto elegido (\textbf{Ce}), se puede proponer una nueva configuración, donde se revisa el desempeño de cada concepto con respecto a los criterios, analizándolos para extraer las características que lo hicieron superior en ese criterio en específico.

Una vez que se han identificado las características a mejorar del \textbf{Ce}, se pueden realizar modificaciones a estas, sin embargo, hay algunas características que están contrapuestas. Para determinar el cambio a realizar, se utiliza la Tabla \ref{Tab:ConflictosMejoramiento}, en la cual se comparan las características con sus criterios asociados y sus valores, realizando una suma directa de estos para elegir el que tenga un resultado mayor.

\begin{table}
\centering
\caption{Tabla de comparación de caracaterísticas contrarias para el mejoramiento del concepto elegido}
\begin{scriptsize}
\begin{tabular}{|cccc|}
\hline
\multicolumn{1}{|c|}{Característica}          	& \multicolumn{1}{c|}{Criterios favorecidos} & \multicolumn{1}{c|}{Valor de los cirterios} & Suma  \\ \hline
\multicolumn{1}{|c|}{Motor acoplado directamente} & \multicolumn{1}{c|}{Cr2}               	& \multicolumn{1}{c|}{0.019}              	& 0.019 \\ \hline
\multicolumn{1}{|c|}{Transmisión mecánica}    	& \multicolumn{1}{c|}{Cr1,Cr4,Cr6}       	& \multicolumn{1}{c|}{0.039,0.081,0.061}  	& 0.181 \\ \hline
                                              	&                                        	&                                         	&   	\\ \hline
\multicolumn{1}{|c|}{Brazo en el centro}      	& \multicolumn{1}{c|}{Cr3,Cr5,Cr6}       	& \multicolumn{1}{c|}{0.025,0.04,0.061}   	& 0.126 \\ \hline
\multicolumn{1}{|c|}{Brazo en un extremo}     	& \multicolumn{1}{c|}{Cr4}               	& \multicolumn{1}{c|}{0.081}              	& 0.081 \\ \hline
                                              	&                                        	&                                         	&   	\\ \hline
\multicolumn{1}{|c|}{Efector de 2 dedos}      	& \multicolumn{1}{c|}{Cr8,Cr11,Cr12}     	& \multicolumn{1}{c|}{0.04,0.013,0.021}   	& 0.074 \\ \hline
\multicolumn{1}{|c|}{Efector de 3 dedos}      	& \multicolumn{1}{c|}{Cr9,Cr10,Cr13}     	& \multicolumn{1}{c|}{0.03,0.059,0.085}   	& 0.174 \\ \hline
\end{tabular}
\end{scriptsize}
\label{Tab:ConflictosMejoramiento}
\end{table}

Por lo tanto, las modificaciones a realizar son: 

\begin{itemize}[noitemsep,nolistsep]
\item Para reducir la potencia, se usa el brazo ranurado con actuadores en la base.
\item Se sustituye el eje largo de acoplamiento a la estructura por una placa similar a la del concepto 4.
\item Se elimina la plataforma deslizable del laboratorio cónico para recuperar la forma cilíndrica del concepto 3, lo cual mejora el aprovechamiento del espacio tanto del módulo desechador como del de medición de peso.
\item Las tarjetas se colocan al centro de la estructura.
\item Se utilizan más sensores, ubicados en los componentes de mayor interés.
\end{itemize}

\begin{figure}
\centering
\includegraphics[scale=0.5]{imagenes/Conceptos/Concepto final.jpg}
\caption{Modelo tridimensional del concepto mejorado}
\label{fig:ConceptoMejorado}
\end{figure}

\subsubsection*{Validación de concepto mejorado}

Es necesario someter el \textbf{Cm} a la misma evaluación aplicada a los otros conceptos, comparando únicamente el \textbf{Ce} con el \textbf{Cm}, de manera que si este último obtiene un mejor puntaje, significa que las modificaciones realizadas incrementan el desempeño del sistema.

Tras realizar la evaluación de conceptos, el concepto 5 obtuvo \textit{0.375}, mientras que el \textbf{Cm} obtuvo \textit{0.588}.

La Figura \ref{fig:ConceptoMejorado} muestra el modelo tridimensional del concepto final mejorado (\textbf{Cm}), en el que se han realizado los cambios mencionados previamente.