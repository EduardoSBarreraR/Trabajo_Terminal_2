\section{Diseño de dominio específico}

A lo largo de este capítulo se realiza el diseño a detalle del sistema, para posteriormente seleccionar los métodos de manufactura, materiales y componentes físicos que conforman los módulos pertenecientes al mismo.

\subsection{Sistema robótico (S1)}
\subsubsection{Módulo de manipulador (M1)}

\textbf{\textit{Brazo antropomórfico}}

Para comenzar el diseño del manipulador, resulta necesario establecer la distancia horizontal máxima que debe alcanzar el mismo, la cual se calcula utilizando la ecuación (\ref{eq:Pitagorazo}), que corresponde a la ecuación de triángulos rectángulos, y despejando para obtener el cateto horizontal a partir de la cateto vertical y la hipotenusa mostrados en la figura \ref{fig:AlcancePitagoras}.

\begin{figure}
\centering		
	\includegraphics[scale=0.3]{imagenes/Dominio especifico/Vista lateral con brazo.png}
	\caption{Alcance máximo del sistema}
	\label{fig:AlcancePitagoras}
\end{figure}

\begin{equation}
\label{eq:Pitagorazo}
BH = \sqrt{BT^2-BV^2}
\end{equation}

En donde $BH$ es la distancia horizontal al punto más lejano, $BT$ es la longitud del brazo totalmente estirado y $BV$ es la distancia de la base del robot hasta el suelo.

El objetivo propuesto es que el alcance horizontal del brazo sea de aproximadamente 70cm ($BH 	\approx 70cm$), y tomando en cuenta que la distancia del suelo a la base del robot $BV$ es de 37cm, se requiere una longitud de brazo $BT$ de 79.17 cm, de los cuales 20cm se consideran ocupados por la muñeca esférica y el efector final, quedando 59.17cm libres para los dos eslabones del manipulador.

Además de esto, se establece que la longitud del segundo eslabón $l_{2}$ sea igual a $3/4$ de la longitud del primero $l_{1}$, resultando en $l_{1}=33.81cm$ y $l_{2}=25.35cm$. Los números enteros más cercanos que cumplen esta relación son $l_{1}=32cm$ y $l_{2}=24cm$, los cuales son seleccionados con fines de simplicidad en la manufactura.

De esta manera, las longitudes quedan como se muestra a continuación: $BT = 76cm$, $BH = 66.38cm$, $BV = 37cm$

\begin{flushright}
\textit{Selección de material para eslabones}
\end{flushright}

Con el fin de determinar el material para construir el sistema robótico, se debe considerar su geometría, tomando en consideración la restricción de masa (R5). Se considera de forma preliminar que la base fija al rover tenga una masa de 2 Kg, lo cual deja 10 Kg disponibles para el manipulador, además de que se determina un factor de seguridad para la masa de la muestra igual a 2, y el efector final tiene una masa de 2Kg\cite{GripperOS}, el cual se discute en la sección \ref{sec:ModEfe}, quedando 7.5 Kg para el manipulador.

Con el objetivo de generar reacciones pequeñas, se establece que el primer eslabón ocupe la mayor parte de la masa, ya que es el que soporta al resto del manipulador, mientras que el eslabón 2 y la muñeca deben ser más ligeros que el primer eslabón al estar más lejos de los ejes de giro de los primeros 2 GDL, por lo que se reduce la masa asignada en un Kg para cada elemento, quedando de la siguiente manera: 1) Eslabón 1: 3.5 Kg, 2) Eslabón 2: 2.5 Kg, 3) Muñeca:  1.5 Kg, 4) Efetor final: 2 Kg, 5) Muestra: 0.5 Kg.

Contando con estos datos, es posible calcular la densidad máxima que debe poseer el material a utilizar, consultando el gráfico que relaciona la densidad de los materiales con su respectivo módulo de elasticidad propuesto por Michael Ashby\cite{Ashby}.

\begin{flushright}
\textit{Diseño de geometría de los eslabones}
\end{flushright}

La geometría del primer eslabón está determinada por las siguientes dimensiones: 1) Longitud: 32 cm, 2) Espesor: 8 mm. 3) Alto: 3 cm, 4) Radio de chaflán: 1.5 cm.

Con estos datos es posible calcular el volumen ocupado por el mismo, separándolo en sus geometrías básicas, que son un cilindro y un prisma rectangular, además de considerar el volumen de los ejes utilizados para unir ambos perfiles de cada eslabón, por lo que se debe sumar el volumen de éstos, y restar el volumen del barreno requerido para acoplarlos, sustituyendo las dimensiones en la ecuación (\ref{eq:VolumenE1}) 

\begin{equation}
\label{eq:VolumenE1}
V_{e} = 2t_{e}(h_{e}l_{e} + \pi r^2_{e}-50 \pi)+400 \pi  
\end{equation}

En donde $ \; V_{e} =$ es el volumen ocupado por el eslabón, $t_{e} =$ es el espesor del perfil del eslabón, $h_{e} =$ es la altura del perfil del eslabón, $l_{e} =$ es la longitud del perfil del eslabón y $r_{e} =$ es el radio del chaflán del eslabón.


Sustituyendo $t_{e_{1}}$,$h_{e_{1}}$,$l_{1}$ y $r_{e_{1}}$ en la ecuación (\ref{eq:VolumenE1}), queda lo siguiente:


\begin{center}
$V_{e_{1}} = \unit[174.962e-6]{m^3}$
\end{center}


Una vez que se ha calculado el volumen que ocupa el eslabón con las dimensiones especificadas, y utilizando el valor de su masa determinada, es posible calcular la densidad máxima que debe tener el material, cuyo valor está dado por la ecuación (\ref{eq:DensidadE1}), recordando que el concepto solución contempla dos placas paralelas, por lo que el peso determinado debe distribuirse equitativamente.

\begin{equation}
\label{eq:DensidadE1}
\rho_{e} = \frac{m_{e}}{2V_{e}}
\end{equation}

En donde $m_{e}$ es la masa del eslabón y $\rho_{e}$ es la densidad del eslabón.


Sustituyendo $m_{e_{1}}$ y $V_{e_{1}}$ en la ecuación (\ref{eq:DensidadE1}), queda lo siguiente:

\begin{center}
 $\rho_{e_{1}} = \unitfrac[10002.17]{Kg}{m^3}$ 
 \end{center} 
 
Una vez que se conoce la densidad máxima $\rho_{e_{1}}$ del material a seleccionar, se analiza la relación entre la densidad y el módulo de elasticidad de los materiales mostrada en el gráfico de la Figura \ref{fig:DensidadVSYoung_Seleccion}, que indica aquellos materiales que no se pueden elegir con un área sombreada, debido a que su densidad es mayor a la máxima establecida en el cálculo anterior, mostrando que la variedad de materiales entre los que se puede elegir es amplia. Esto incluye a los metales, los cuales son una buena elección debido a su módulo de elasticidad elevado, sobresaliendo entre éstos el aluminio, muy utilizado en aplicaciones aeroespaciales debido a su alta maquinabilidad sin comprometer el peso. En la Tabla \ref{tab:PropiedadesAluminio} se muestran las principales propiedades mecánicas del mismo\cite{SolidWorks}.

\begin{figure}
\centering		
	\includegraphics[scale=0.65]{imagenes/Dominio especifico/DensidadVSYoung_Seleccion.pdf}
	\caption{Rango de materiales elegibles para el eslabón}
	\label{fig:DensidadVSYoung_Seleccion}
\end{figure}

\begin{table}
\caption{Propiedades mecánicas del Aluminio 6061 T6}
\centering
\begin{scriptsize}
\begin{tabular}{|c|c|c|}
\hline
Propiedad              & Valor & Unidades \\ \hline
Densidad               & 2700  & $\unitfrac{Kg}{m^3} $   \\ \hline
Módulo elástico        & 69    & GPa      \\ \hline
Coeficiente de Poisson & 0.33  & adimensional         \\ \hline
\end{tabular}
\end{scriptsize}
\label{tab:PropiedadesAluminio}
\end{table}

Para seleccionar el material del segundo eslabón se sigue el mismo procedimiento, utilizando las dimensiones determinadas, las cuales son: 1) Longitud: 24 cm, 2) Espesor: 6 mm, 3) Alto: 2.25 cm, 4) Radio de chaflán: 1.125 cm.

Con estos datos se calcula el volumen y la densidad sustituyéndolos en las ecuaciones (\ref{eq:VolumenE1}) y (\ref{eq:DensidadE1}) como sigue:

\begin{center}
$V_{e_{2}}   = \unit[80.252e-6]{m^3}$
\\
$\rho_{e_{2}} = \unitfrac[15575.93]{Kg}{m^3}$
\end{center}

Como en el caso anterior, el cálculo demuestra que hay muchos materiales entre los cuales elegir, por lo que se selecciona nuevamente el aluminio, ya que presenta la ventaja añadida de que es más barato comprar el mismo material en mayor cantidad que una cantidad menor de distintos materiales.

Considerando que unos eslabones sólidos tienen factores de seguridad grandes, y dado que uno de los objetivos del proyecto es reducir el consumo energético del sistema, se realizaron varios rediseños en las cuales se reduce la cantidad de material ranurando los eslabones y modificando la sección transversal, resultando en las siguientes dimensiones $t_{e{1}} =$ 6.35 mm, $t_{e{2}} =$ 6 mm.

Los eslabones rediseñados pueden observarse en la Figura \ref{fig:CADEslabones}.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Primeros eslabones ranurados.png}}
			{a) Primer eslabón}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Segundos eslabones ranurados.png}}
			{b) Segundo eslabón}
		\\
	\end{tabular}
	\caption{Modelos CAD de los eslabones}
	\label{fig:CADEslabones}
\end{figure}

El volumen ocupado por los eslabones y la masa de los mismos son los siguientes: $V_{e{1}} =113.899e-6 m^{3}$, $V_{e{2}} =65.098e-6 m^{3}$, $m_{e{1}} =307.53g$ y $m_{e{2}} =175.77g$ 

\begin{flushright}
Validación de la selección
\end{flushright}

Para comprobar el rendimiento del material frente a las cargas aplicadas se ejecuta un análisis de elemento finito estático\cite{FEASolid} realizando un estudio de resistencia a cada elemento en el software SolidWorks 2018\textregistered \cite{SolidWorks}.

Para poder ejecutar este análisis, el software requiere que el usuario indique el valor de las cargas a las que el elemento está sometido, por lo tanto, se calculan las cargas equivalentes mediante las ecuaciones estáticas de equilibrio, siendo la ecuación (\ref{eq:SumaFuerzas}) la correspondiente a la suma de fuerzas y la ecuación (\ref{eq:SumaMomentos}) a la suma de momentos.

\begin{equation}
\label{eq:SumaFuerzas}
\uparrow \sum F_{y} = 0 
\end{equation}

En donde $F_{y} =$ Fuerzas existentes en el eje Y.

\begin{equation}
\label{eq:SumaMomentos}
\circlearrowleft \sum M_{o} = 0
\end{equation}

En donde $M_{o} =$ Momentos generados por las fuerzas normales al punto O.


\begin{figure}
\centering		
	\includegraphics[scale=0.5]{imagenes/Dominio especifico/Validaciones eslabones/DP1.jpg}
	\caption{Cargas aplicadas al sistema}
	\label{fig:CargasSRan}
\end{figure}

En la Figura \ref{fig:CargasSRan} se pueden apreciar las cargas a las que está sometido el sistema, analizando las cargas aplicadas en el eslabón 1 en la Figura \ref{fig:CargasEslabones}a, mientras que las cargas aplicadas al eslabón 2 son mostradas en la Figura \ref{fig:CargasEslabones}b. Estos datos proporcionan la información necesaria para hacer las simulaciones.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/E12.jpg}}
			{a) Eslabón 1 }
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/E22.jpg}}
			{b) Eslabón 2}
		\\
	\end{tabular}
	\caption{Cargas aplicadas a los eslabones.}
	\label{fig:CargasEslabones}
\end{figure}

Los estudios de los eslabones se muestran en las Figuras \ref{fig:AnEs}a y \ref{fig:AnEs}b respectivamente, mostrando en color rojo las áreas en las que el esfuerzo von Mises es mayor, reduciendo la magnitud así como cambiando el color a azul en las áreas en las que es menor.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Eslabon_1_ranurado.png}}
			{a) Eslabón 1}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Eslabon_2_ranurado.png}}
			{b) Eslabón 2}
		\\
	\end{tabular}
	\caption{Estudios de resistencia}
	\label{fig:AnEs}
\end{figure}

El esfuerzo von Mises máximo de 4.681 MPa en el primer eslabón y 8.19 MPa en el segundo arrojan un factor de seguridad de 58.74 y 33.57 respectivamente, por lo que es posible concluir que se logró reducir la masa en un 30\% en comparación a eslabones sólidos sin que el material falle.

\begin{flushright}
\textit{Selección de actuadores para los eslabones}
\end{flushright}

Cabe señalar que para la selección de los motores, tomando en cuenta las condiciones de operación, el resultado del análisis estático de cargas es suficiente como criterio de par mínimo, pues no hay un parámetro mínimo de velocidad que cumplir.

Para seleccionar los motores, es necesario determinar el par que el motor debe aplicar para mantener en equilibrio al sistema y la muestra, indicada en la Figura \ref{fig:TorquesMotor}a para el segundo GDL, y la Figura \ref{fig:TorquesMotor}b para el tercer GDL.

\begin{figure}
	\centering
	\begin{tabular}{c}
		\subf{\includegraphics[width=0.9\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/TorMot1.pdf}}
			{a) Eslabón 1}
		\\
		\subf{\includegraphics[width=0.7\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/TorMot2.pdf}}
			{b) Eslabón 2}
		\\
	\end{tabular}
	\caption{Diagramas de cargas aplicadas a los motores.}
	\label{fig:TorquesMotor}
\end{figure}

Conociendo este valor, se comparan diversos motores en el mercado utilizando el árbol de decisiones mostrado en el Apéndice \ref{ApA1:MotCD}, y se selecciona el motorreductor Planetario Premium HD 12V, 23RPM 4166.2oz-in con codificador, fabricado por Servo City, que de acuerdo a la hoja de especificaciones (Anexo \ref{An:Mot}), cuenta con las siguientes características.

\begin{itemize}[noitemsep,nolistsep]
\item Par máximo = 4166.2 oz-in = 29.4198 Nm
\item Velocidad nominal = 23 rpm = 2.4 rad/s
\item Corriente sin carga = 0.54 A
\item Corriente de motor bloqueado = 20[A]
\item Voltaje de alimentación = 12 V
\item Relación de transmisión = 369:1
\end{itemize}

Conociendo la corriente del motor bloqueado, y el par máximo se calcula la constante de par $K_{m}$ de acuerdo a la ecuación:

\begin{align*}
K_{m} = \frac{29.5[N-m]}{20[A]}=1.475\unitfrac{N-m}{A}
\end{align*}

\begin{flushright}
	Validación de actuadores
\end{flushright}

Para comprobar que los motores seleccionados son capaces de mover la carga determinada, se calcula el factor de seguridad.

\textit{Par necesario para el segundo GDL = 11.145 Nm ; FS = 2.639}\\
\textit{Par necesario para el tercer GDL = 5.6483 Nm ; FS = 5.208}

Con estos pares calculados, y despejando para $i_{a}$ de la ecuación, se puede calcular la corriente esperada.

\begin{align}
i_{a} = \frac{\tau_{0}}{K_{m}}=\frac{11.145N-m}{1.475\unitfrac{N-m}{A}} = 7.55[A]
\end{align}

\begin{flushright}
\textit{Transmisión de movimiento}
\end{flushright}

Las bandas síncronas son cada vez más utilizadas en aplicaciones donde antes se consideraba utilizar engranes o cadenas\cite{Mott}, pues tienen la ventaja de presentar bajas vibraciones de operación, poco ruido, facilidad de determinar la posición actual entre otras, sin sacrificar la capacidad de carga que pueden mover. Por esta razón, se utilizan bandas para transmitir la potencia generada por los actuadores.
Los parámetros que debe cumplir la banda de transmisión son los siguientes: 1) Velocidad de movimiento del efector: $0.05 \unitfrac{m}{s}$, 2) Relacion de velocidad: \textit{1:1}.

Para calcular la potencia que debe transmitir la banda de cada eslabón (ecuación \ref{eq:PotBanda}), se toman en cuenta los pares necesarios (mostrados en las Figuras \ref{fig:TorquesMotor}a y \ref{fig:TorquesMotor}b respectivamente), y la velocidad angular a la que gira el eje del motor, recordando que es la misma de la banda y utilizando la ecuación (\ref{eq:VTang}) como sigue.

\begin{align*}
\omega_{1} &= v/r= \frac{.05\unitfrac{m}{s}}{0.73m} = 0.068 \unitfrac{rad}{s} = 0.64 rpm\\
\omega_{2} &= \frac{.05\unitfrac{m}{s}}{0.41m} = 0.121 \unitfrac{rad}{s} = 1.15 rpm\\
P_{1} &= \tau_{1} \omega_{1} = 11.145Nm*0.068\unitfrac{rad}{s} = 0.757 W = 0.0010 HP\\
P_{2} &= \tau_{2} \omega_{2} = 5.6483Nm*0.121\unitfrac{rad}{s} = 0.683 W = 0.0009 HP
\end{align*}

El ajuste de potencia se determina con la ecuación (\ref{eq:PotDis}), utilizando un factor de servicio de 1.1, asociado con aplicaciones de carga ligera en periodos de 8 horas diarias (servicio intermitente)\cite{Mott}, y queda como sigue:

\begin{align*}
P_{1-ajustada} &= 0.757W*1.1=0.8327 W = 0.0014 HP\\
P_{2-ajustada} &= 0.683W*1.1=0.7513 W = 0.0012 HP
\end{align*}

Para determinar el paso mínimo de la transmisión se utiliza la tabla del fabricante SDP/SI\cite{BandasSDPSI}, con el valor de potencia y la velocidad de operación, lo que indica que una banda de perfil XL es adecuada para esta aplicación en ambos eslabones.
La longitud de la banda está determinada por dos factores, la distancia entre centros y el diámetro de las poleas, por lo que se procede a realizar su selección.

Dado que el diámetro de la polea es directamente proporcional a su número de dientes para mantener el paso, se busca para la polea conducida el número mínimo estándar de dientes para poleas con diámetro interno de 12mm (de acuerdo al diseño del eje, tratado más adelante), el cual es de 15 dientes, por lo que se selecciona la polea A 6A 3-15DF03716 de SDP/SI. Por lo tanto, para la polea conductora se requiere una polea de diámetro interno de 6mm (diámetro del eje del motor), con 15 dientes para mantener la relación de velocidad especificada, siendo elegida la polea Actobotics 15D (Anexo \ref{An:Pol15}).

Con el valor del diámetro de la polea, se calcula la longitud de cada banda con la ecuación (\ref{eq:LongBanda}).

\begin{align*}
L_{entre \: ejes} &=  2*320[mm]+15*5.080[mm] = 716.2[mm] = 28.19[in] = 145\: ranuras\\
L_{motor \: a \: eje} &=  2*44.6[mm]+15*5.080[mm] = 165.4[mm] = 6.511[in] = 35\: ranuras
\end{align*}

Las bandas XL se encuentran en el mercado con anchos entre 0.25[in] y 0.375[in].
Una vez que se conocen los datos necesarios para las bandas, se seleccionan los modelos de ServoCity B375-290XL con 145  ranuras y B375-70XL  con 35 ranuras.

Conociendo estos datos, se calcula la potencia base nominal ajustada\cite{Mott} utilizando la ecuación (\ref{eq:PotBandAjus}) como sigue:

\begin{align*}
& P_{1-ajustada} = 0.0014 HP * 1 = 0.0014 HP\\
& P_{2-ajustada} = 0.0012 HP * 0.7 = 0.0008 HP
\end{align*}

Para comprobar que la banda opera con niveles bajos de ruido, se calcula la velocidad lineal de la banda, y para ello se utiliza la ecuación (\ref{eq:VelBandRuido}).

\begin{align*}
V_{banda-1}&=\frac{12.7[mm]*0.068\left[\unitfrac{m}{s}\right]}{2}=0.431 m/s\\
V_{banda-2}&=\frac{12.7[mm]*0.121\left[\unitfrac{m}{s}\right]}{2}=0.768 m/s
\end{align*} 

Ya que la velocidad en ambas bandas es menor a 17.78 m/s, que es la velocidad máxima a la que puede operar la banda sin perturbaciones\cite{Mott}, se comprueba que las bandas no operan con ruido.

Las características de las bandas seleccionadas se muestran en la tabla \ref{tab:BandasModelos}.

\begin{table}
	\centering
	\caption{Características de las bandas seleccionadas}
	\label{tab:BandasModelos}
	\scriptsize
	\begin{tabular}{|c|c|c|} 
	\cline{2-3}
	\multicolumn{1}{c|}{} & Primer eslabón & Segundo eslabón      \\ 
	\hline
	Modelo                & B375-70XL      & B375-290XL           \\ 
	\hline
	Paso                  & \multicolumn{2}{c|}{0.200 (XL)}       \\ 
	\hline
	Material              & \multicolumn{2}{c|}{Neopreno}         \\ 
	\hline
	Número de ranuras     & 35             & 145                  \\ 
	\hline
	Material tensor       & \multicolumn{2}{c|}{Fibra~de~vidrio}  \\ 
	\hline
	Ancho [in]            & \multicolumn{2}{c|}{3.75}             \\ 
	\hline
	Largo [in]            & 7              & 29                   \\
	\hline
	\end{tabular}
\end{table}

\begin{table}
	\centering
	\caption{Características de las poleas seleccionadas}
	\label{tab:PoleasModelos}
	\scriptsize
	\begin{tabular}{|c|c|c|} 
	\cline{2-3}
	\multicolumn{1}{c|}{}      & Conductora & Conducida                         \\ 
	\hline
	Material                   & \multicolumn{2}{c|}{Aluminio 6061 T6}          \\ 
	\hline
	Ancho máximo de banda [in] & \multicolumn{2}{c|}{0.375}                     \\ 
	\hline
	Diámetro de barreno [mm]   & 6          & 12                                \\ 
	\hline
	Modo de sujeción           & \multicolumn{2}{c|}{Retenedor 10-32*1/8 [in]}  \\ 
	\hline
	Diámetro de paso [in]      & \multicolumn{2}{c|}{0.637}                     \\
	\hline
	\end{tabular}
\end{table}

Las poleas mostradas en la Tabla \ref{tab:PoleasModelos} sirven para la transmisión de movimiento de todos los ejes de movimiento del brazo, sin embargo es importante tomar en cuenta que la banda necesita estar en tensión, por lo que es necesario diseñar un mecanismo que mantenga la tensión en la banda perteneciente al segundo eslabón, para lo cual se diseña un ``ocioso'' que puede colocarse en el eje del primer eslabón sin afectar su comportamiento, pues tiene rodamientos en la parte interna (Anexo \ref{An:RodChi}), como se muestra en la Figura \ref{fig:PoleaLoca}, con los cuales se ajusta al eje del primer eslabón, girando libremente sin aplicar torsión al mismo.
La necesidad de diseñar la polea surge del hecho de que los fabricantes solo ofrecen ociosos para tensar una banda, mientras que esta aplicación requiere que dos bandas diferentes se muevan a la par, por lo que utilizar las poleas ociosas comerciales requiere unirlas mecánicamente, lo que puede representar riesgo de deformaciones o desalineamiento entre ejes de giro, por lo cual se opta por manufactura aditiva en un plástico de ingeniería \cite{Mat3D}, como es el Nylon12, PC, Ultem y Antero.

\begin{figure}
\centering		
	\includegraphics[scale=0.3]{imagenes/Dominio especifico/Validaciones eslabones/PoleaLoca.png}
	\caption{Vista de sección del ocioso con dientes}
	\label{fig:PoleaLoca}
\end{figure}

\begin{flushright}
\textit{Diseño de ejes para los eslabones}

Eje del primer eslabón
\end{flushright}

El primer eje tiene está configurado por dos apoyos de rodamiento, una polea ociosa doble, una polea síncrona común y dos sujetadores, como se muestra en la Figura \ref{fig:DEje1}.

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/DiagramaEJE1.pdf}
	\caption{Diagramas de cargas del eje 1}
	\label{fig:DEje1}
\end{figure}

Para conocer la magnitud del momento flector y el momento torsionante, se analiza el eje como viga en dos planos, mostrados en las Figuras \ref{fig:CEje1} y \ref{fig:CEje1a}.

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/Eje1f.jpeg}
	\caption{Plano frontal de cargas del eje 1}
	\label{fig:CEje1}
\end{figure}

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/Eje1s.jpeg}
	\caption{Plano superior de cargas del eje 1}
	\label{fig:CEje1a}
\end{figure}

De estos diagramas se obtienen además las reacciones generadas en los rodamientos, las cuales se utilizan más adelante para realizar la selección de estos.

Para calcular la fuerza que la banda aplica sobre el eje, se utilizan las ecuaciones (\ref{eq:FuerzaBanda}).

\begin{align*}
F_{n} &= \frac{11.244Nm}{0.023749m}=473.45N\\
F_{s} &= 1.5*473.45=710.177N
\end{align*}

\begin{align*}
F_{n} &= \frac{6.616Nm}{0.02375m}=278.568N\\
F_{s} &= 1.5*278.568=417.852N
\end{align*}

Con los valores obtenidos, enlistados a continuación, se propone utilizar acero 1060 rolado, cuyas características son:

\begin{itemize}[noitemsep,nolistsep]
\item Densidad: $7850 \unitfrac{Kg}{m^{3}}$
\item Módulo de elasticidad: $205 GPa$
\item Límite elástico: $814 MPa$
\item Esfuerzo de cedencia: $485 MPa$
\end{itemize}

Se ajusta el valor del límite elástico con las ecuaciones (\ref{eq:Sn}) y (\ref{eq:SnC}) con los siguientes factores de corrección\cite{Mott}

\begin{itemize}[noitemsep,nolistsep]
\item Factor de material: $C_{m} = 0.8$
\item Factor de tipo de esfuerzo (flexionante): $C_{st} = 1$
\item Factor de confiabilidad al 90\%: $C_{R} = 0.9$
\item Factor de tamaño: $C_{s} = 0.95$
\end{itemize}

\begin{align*}
S_{n} &=0.5*814 MPa = 407 MPa\\
S'_{n} &= 407 MPa * 0.8 * 1 *0.9*0.95 = 278 MPa
\end{align*}

Finalmente, con los valores obtenidos, se puede calcular el diámetro mínimo del primer eje con la ecuación \ref{eq:DiamEje}.

\begin{align*}
D_{1} &= 0.0113 m
\end{align*}

Las reacciones en los apoyos representan las cargas radiales a las que están sometidos los rodamientos de las chumaceras en las que se apoya el eje, por lo que es necesario calcular la carga dinámica mínima que deben soportar utilizando la ecuación (\ref{eq:RodamientosAleados}), tomando como base una vida de un año con el servicio intermitente, es decir, 2900 horas o 4.002 millones de revoluciones.

\begin{align*}
C_{eje-1} &= 166.823 N \\
C_{eje-2} &= 160.377 N 
\end{align*}

\begin{flushright}
Eje del segundo eslabón
\end{flushright}

De manera análoga al diseño del primer eje, se analizan las cargas a las que está sometido el segundo eje, como se muestra en la Figura \ref{fig:DEje2}.

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/DiagramaEJE2.pdf}
	\caption{Diagramas de cargas del eje 2}
	\label{fig:DEje2}
\end{figure}

Como se puede ver en las Figuras \ref{fig:CEje2}  y \ref{fig:CEje2a}., solo la polea y los eslabones producen fuerzas sobre el eje, el cual también está apoyado en dos rodamientos.

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/Eje2f.jpeg}
	\caption{Plano frontal de cargas del eje 2}
	\label{fig:CEje2}
\end{figure}

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/Eje2s.jpeg}
	\caption{Plano superior de cargas del eje 2}
	\label{fig:CEje2a}
\end{figure}

La fuerza ejercida por la banda, es la misma que la calculada anteriormente para la polea ociosa.

Para este eje, se propone el mismo material, y se utilizan los mismos factores de correción.

Entonces, el diámetro mínimo queda como sigue:

\begin{align*}
D_{2} &= 0.0096 m
\end{align*}

Finalmente, las reacciones obtenidas se utilizan en la ecuación (\ref{eq:RodamientosAleados})

\begin{align*}
C_{1} &= 95.013 N \\
C_{2} &= 95.240 N 
\end{align*}

Las piezas comerciales adquiridas para ensamblar el manipulador, las cuales pueden verse en el Anexo \ref{An:PiezasExtra}, son:

\begin{itemize}[noitemsep,nolistsep]
\item Chumacera de piso: Soporte para el eje del eslabón perteneciente al segundo GDL.
\item Abrazadera para motor: Sujeción de los motores a la base giratoria.
\item Chumacera de pared: Soporte para el eje del eslabón perteneciente al tercer GDL.
\item Sujetador: Para acoplar rígidamente el eje al eslabón.
\end{itemize}

\begin{flushright}
\textit{Base del manipulador}
\end{flushright}

En el diseño de la cadera (GDL 1) se considera extender el eje de giro del motor a una plataforma giratoria que sostenga a los demás elementos del manipulador robótico. Dicha extensión consiste en un acoplador sujeto al eje del motor en un extremo y al eje de la plataforma giratoria en el otro. 

Considerando que el eje de giro se encuentra sometido a cargas y esfuerzos debido a la distribución de los elementos del manipulador robótico, se colocan rodamientos en el eje de giro de la plataforma giratoria para resistir las fuerzas axiales y radiales generadas.

Estas cargas se conocen al trasladar las reacciones generadas por el brazo robótico y la muestra que transporta hacia las direcciones radial y axial, como se muestra en la Figura \ref{fig:DCBase}, las cuales se distribuyen a rodamientos específicos para cada tipo de carga.

\begin{figure}
\centering		
	\includegraphics[scale=0.3]{imagenes/Dominio especifico/Validaciones eslabones/Transmision/Diagrama reacciones baleros 2.pdf}
	\caption{Diagrama de cargas para el eje del primer GDL}
	\label{fig:DCBase}
\end{figure}

La Tabla \ref{tab:MasasBrazo} muestra las masas de los elementos del brazo, así como la distancia a la que se encuentran del punto D, que es en el que se realiza la suma de momentos.

\begin{table}
\centering
\caption{Masas de los elementos del brazo robótico}
\begin{scriptsize}
\begin{tabular}{|c|c|c|c|}
\hline
                  & \textbf{Símbolo} & \textbf{Masa {[}kg{]}} & \textbf{Distancia {[}m{]}} \\ \hline
Muestra           & $m_{piedra}$          & 0.5                    & 0.96                       \\ \hline
Efector final     & $m_{ef}$              & 0.5                    & 0.885                      \\ \hline
Muñeca            & $m_{mu\tilde{n}eca}$          & 0.627                  & 0.775                      \\ \hline
Eslabón 2         & $m_{2}$               & 0.28                   & 0.535                      \\ \hline
Eslabón 1         & $m_{1}$               & 0.627                  & 0.255                      \\ \hline
Soporte del brazo & $m_{soporte}$         & 0.5                    & 0.095                      \\ \hline
Base giratoria    & $m_{base}$            & 2.375                  & 0.0275                     \\ \hline
\end{tabular}
\label{tab:MasasBrazo}
\end{scriptsize}
\end{table}

\begin{align*}
R_{A} &= 488.6 N\\
R_{B} &= 488.6 N\\
R_{C} &= 326.58 N\\
R_{D} &= -273.51 N
\end{align*}

Con las reacciones $R_{A}$ y $R_{B}$, es posible diseñar el eje, pues son las únicas que provocan flexión, mientras que el momento torsionante es proporcionado por el motor.

El material disponible para acoplar el eje del motor, y sobre el cual se aplican las reacciones, es acero inoxidable 303, cuyas características se enlistan a continuación. 

\begin{itemize}[noitemsep,nolistsep]
\item Densidad: $8000 \unitfrac{Kg}{m^{3}}$
\item Módulo de elasticidad: $193 GPa$
\item Límite elástico: $620 MPa$
\item Esfuerzo de cedencia: $240 MPa$
\end{itemize}

El proceso de diseño del eje es similar al de los ejes de los eslabones, como se muestra:

\begin{align*}
S_{n} &=0.5*620 MPa = 310 MPa \\
S'_{n} &= 310 MPa * 0.8 * 1 *0.9*0.95 = 212 MPa \\
D &= 0.0178 m \\
C_{axial} &= 496 N \\
C_{radial} &= 742 N 
\end{align*}

Las cargas dinámicas que son capaces de soportar los rodamientos se calculan con la ecuación (\ref{eq:RodamientosAleados}), sustituyendo $P_{d}$ con el valor de las reacciones axial y radial según sea el caso.

De acuerdo al catálogo en línea del fabricante SKF\cite{SKF}, se seleccionan los rodamientos más pequeños que cumplen con las características necesarias, siendo un rodamiento axial de agujas con designación AXK-4565 (Anexo \ref{An:RodAx}) para las cargas axiales, y un rodamiento de rodillos con designación NU-303 (Anexo \ref{An:RodRad}) para las cargas radiales.

La plataforma giratoria debe ser capaz de sostener a los dos motores que mueven los eslabones, así como el soporte del brazo. Por ello se utiliza una geometría de medio círculo en la parte posterior, mientras que en la parte frontal se colocan dos salientes, como se muestra en la Figura \ref{fig:PlataGiratoria}, sobre los que se montan las chumaceras que soportan al eje del primer grado de libertad, dejando un espacio libre entre estas para permitir que el eslabón gire por debajo del plano horizontal evitando la colisión con la plataforma. Para facilitar la comprensión de la geometría, se recurre a una perspectiva isométrica (donde se observa como la ranura en la pieza permite el movimiento de los eslabones) y a la vista superior (en donde se ve la distribución de los componentes), mostradas en la Figura \ref{fig:PlataformaVistas}a y \ref{fig:PlataformaVistas}b respectivamente.

\begin{figure}
\centering		
	\includegraphics[scale=0.5]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Plataforma.png}
	\caption{Modelo CAD de la plataforma giratoria}
	\label{fig:PlataGiratoria}
\end{figure}

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Plataforma_Isometrico.png}}
			{a) Perspectiva isométrica}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Plataforma_VistaSuperior.png}}
			{b) Vista superior}
		\\
	\end{tabular}
	\caption{Vistas de referencia para la plataforma giratoria}
	\label{fig:PlataformaVistas}
\end{figure}

El cilindro está diseñado de acuerdo a las dimensiones del eje del motor acoplado y los rodamientos seleccionados previamente, además de añadir barrenos para atornillarlo a la base fija, 
cuyo resultado se muestra en la Figura \ref{fig:PiezasBase}a.

Finalmente, la base fija, mostrada en la Figura \ref{fig:PiezasBase}b, es aquella que debe soportar los esfuerzos generados por todo el manipulador, en la que se acopla el cilindro base de la Figura \ref{fig:PiezasBase}a a la placa, como se muestra en la Figura \ref{fig:PiezasBase}c.

\begin{figure}
	\centering
	\begin{tabular}{ccc}
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/CilindroFijo.PNG}}
			{a) Cilindro}
		&
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/BaseFija.png}}
			{b) Placa rectangular}
		&
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Cilindro-Base.png}}
			{c) Cilindro y placa ensamblados}
		\\
	\end{tabular}
	\caption{Piezas de la base fija}
	\label{fig:PiezasBase}
\end{figure}

\begin{flushright}
Validación de la base
\end{flushright}

Para comprobar la integridad mecánica de las piezas que conforman la base, se realiza un análisis de elemento finito\cite{FEASolid} en SolidWorks\textregistered, utilizando como material el aluminio 6061 (propiedades disponibles en la Tabla \ref{tab:PropiedadesAluminio}).

\begin{flushright}
\textit{Plataforma giratoria}
\end{flushright}

Para la plataforma giratoria, que tiene una masa de 0.128[Kg], el análisis queda como sigue:

La Figura \ref{fig:PlatGirAn}a muestra que el esfuerzo von Mises máximo es 53.73[MPa], por lo que tiene un factor de seguridad de 5.11. Mientras que la Figura \ref{fig:PlatGirAn} muestra que la deformación máxima es 0.8[mm].

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Plataforma_Analisis.png}}
			{a) Análisis de resistencia}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Plataforma_Deformacion.png}}
			{b) Análisis de rigidez}
		\\
	\end{tabular}
	\caption{Analisis de elemento finito de la plataforma}
	\label{fig:PlatGirAn}
\end{figure}

\begin{flushright}
\textit{Cilindro base}
\end{flushright}

Para el cilindro base, que tiene una masa de 0.096[Kg], el análisis es el siguiente:

La Figura \ref{fig:CilAn}a muestra que el esfuerzo von Mises máximo es 52[MPa], por lo que tiene un factor de seguridad de 5.28. Mientras que la Figura \ref{fig:CilAn}b muestra que la deformación máxima es 0.004[mm].

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/CilindroFijo_Analisis.png}}
			{a) Analisis de resistencia}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/CilindroFijo_Deformacion.png}}
			{b) Análisis de rigidez}
		\\
	\end{tabular}
	\caption{Análisis de elemento finito del cilindro de la base}
	\label{fig:CilAn}
\end{figure}

\begin{flushright}
\textit{Base fija}
\end{flushright}

Para la base fija, que tiene una masa de 0.230[Kg], el análisis queda como sigue:

La Figura \ref{fig:BaseAn}a muestra que el esfuerzo von Mises máximo es 19.9[MPa], por lo que tiene un factor de seguridad de 13.18. Mientras que la Figura \ref{fig:BaseAn}b muestra que la deformación máxima es 0.028[mm].

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Cilindro-Base_Analisis.png}}
			{a) Análisis de resistencia}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Cilindro-Base_Deformacion.png}}
			{b) Análisis de rigidez}
		\\
	\end{tabular}
	\caption{Análisis de elemento finito de la base fija ensamblada}
	\label{fig:BaseAn}
\end{figure}

\begin{flushright}
\textit{Diseño final de la base fija}
\end{flushright}

La Figura \ref{fig:BaseExp}a muestra la configuración final de la mesa ensamblada, mientras que la Figura \ref{fig:BaseExp}b muestra una vista explosionada que permite apreciar los elementos que la conforman.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/VistaIso.jpg}}
			{a) Vista isométrica}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/Mesa/Mesa explosionada.pdf}}
			{b) Vista explosionada}
		\\
	\end{tabular}
	\caption{Vistas de la base del robot}
	\label{fig:BaseExp}
\end{figure}

\textbf{\textit{Muñeca esférica}}

De acuerdo a las ecuaciones (\ref{eq:DesCin}) y (\ref{eq:DesCin2}), para poder realizar el desacoplamiento cinemático los 3 ejes de giro de la muñeca deben intersecarse en un punto, por lo que se diseña una muñeca esférica.

Debido a que se cuenta con poco espacio y son fáciles de utilizar, se propone utilizar servomotores de tamaño estándar.

Con la finalidad de acoplar el servomotor del primer grado de la libertad de la muñeca (que corresponde al cuarto grado de libertad del robot) al segundo eslabón, y para soportar los esfuerzos radiales, se utiliza una estructura de carga comercial que, como puede apreciarse en la vista explosionada de la Figura \ref{fig:1GDLMun}a, consta de dos soportes laterales, un marco para el servomotor, una chumacera y un adaptador para el eje del mismo. La estructura armada se muestra en la Figura \ref{fig:1GDLMun}b.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.25\textwidth, keepaspectratio]{imagenes/Dominio especifico/Muneca/Primer motor Exp.png}}
			{a) Vista explosionada}
		&
		\subf{\includegraphics[width=0.25\textwidth, keepaspectratio]{imagenes/Dominio especifico/Muneca/Primer motor.png}}
			{b) Vista ensamblada}
		\\
	\end{tabular}
	\caption{Primer grado de libertad de la muñeca esférica}
	\label{fig:1GDLMun}
\end{figure}

Para soportar los motores restantes, manteniendo la intersección de sus ejes, se diseñan varias piezas como sigue: Un conector tipo C que transmite la rotación del primer GDL, una pieza a modo de cubierta que sostiene a los servomotores manteniendo la ortogonalidad entre sus ejes de giro, a la vez que absorbe las cargas radiales aplicadas al eje a través de rodamientos y una tapa para la cubierta con espacio para rodamiento radial, además de un cople para unir el eje del tercer servomotor con la base del efector final.

Además, se adquieren dos acopladores el eje de de los servomotores de los últimos 2 GDL de la muñeca. Aunado a ello, se adquieren dos rodamientos con diámetro intero igual al diámetro del acoplador de 1/2 [in] y un rodamiento con brida para acoplar la pieza con forma de ``C''. 

Estas piezas pueden observarse a detalle en la Figura \ref{fig:23GDLMun}a, mientras que el ensamble se muestra en la Figura \ref{fig:23GDLMun}b. Las piezas adquiridas se encuentran en el Anexo \ref{An:PiezasMueca}, mientras que los rodamientos aparecen en el Anexo \ref{An:RodChi}.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[height=0.25\textheight, keepaspectratio]{imagenes/Dominio especifico/Muneca/Segundo y tercer motor EXP.png}}
			{a) Vista explosionada}
		&
		\subf{\includegraphics[height=0.25\textheight, keepaspectratio]{imagenes/Dominio especifico/Muneca/Segundo y tercer motor.png}}
			{b) Vista ensamblada}
		\\
	\end{tabular}
	\caption{Segundo y tercer grado de libertad de la muñeca esférica}
	\label{fig:23GDLMun}
\end{figure}

La muñeca esférica completa con los servomotores se puede apreciar en la Figura \ref{fig:MuneCAD}.

\begin{figure}
\centering		
	\includegraphics[scale=0.35, angle=90]{imagenes/Dominio especifico/Muneca/MunecaCompleta.png}
	\caption{Modelo CAD de la muñeca esférica}
	\label{fig:MuneCAD}
\end{figure}

Debido a que estas piezas presentan geometrías complejas, y que no se someten a esfuerzos tan grandes como el brazo, se opta por utilizar manufactura aditiva con materiales típicos de la misma. En este sentido, los más populares son el PLA y el ABS, sin embargo, el PLA es conocido por su fragilidad, por lo que el material seleccionado es ABS.

Finalmente, resta seleccionar los servomotores a usar, para lo cual se calcula el par máximo que deben de soportar, utilizando los diagramas mostrados en las Figuras \ref{fig:ParMuneca}a y \ref{fig:ParMuneca}b, destacando que, dado que las cargas se encuentran muy cerca del eje de giro del tercer GDL, el momento que generan es muy pequeño, por lo que se omite su cálculo.

\begin{figure}[H]
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Muneca/Muneca1.pdf}}
			{a) Primer grado de libertad}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Muneca/Muneca2.pdf}}
			{b) Segundo grado de libertad}
		\\
	\end{tabular}
	\caption{Reacciones máximas en las juntas de la muñeca}
	\label{fig:ParMuneca}
\end{figure}

Conociendo este valor, se comparan los distintos motores disponibles en el mercado, utilizando un árbol de decisiones (Apéndice \ref{ApA2:Servo}) y, con base en este, se selecciona el servo de alto rendimiento de EzRobot, con las siguientes características: 1) Par máximo a 7.4 [V] = 19 [kg cm]. 2) Corriente a motor bloqueado = 3[A]. 3) Voltaje de operación = 4.8[V] a 8.4[V]

\subsubsection{Módulo de efector (M2)}
\label{sec:ModEfe}

La función f1.3 (``Tomar/dejar muestra''), requiere que exista una herramienta en el extremo del manipulador robótico, capaz de sujetar una piedra con las características determinadas en los requerimientos R1, R2, R3 y R4. 
De acuerdo al concepto solución seleccionado, el efector final a desarrollar es de tipo ``Gripper'' de tres dedos. 

Existe un modelo de efector con esas características, desarrollado por Kuat Telegenov, Yedige Tlegenov y Almas Shintemirov, titulado y publicado en IEEE Access con el nombre ``A Low-Cost Open-Source 3-D-Printed
Three-Finger Gripper Platform for Research
and Educational Purposes''\cite{GripperOS}, el cual, como se presenta en el abstract del artículo: ``Presentamos un modelo de plataforma de gripper robótico de tres dedos de fuente abierta (Open source) para propósitos de educación e investigación'', resulta una opción viable para utilizar en este proyecto.

La acción de agarre de las falanges se basa en un mecanismo subactuado de dos grados de libertad. En la Figura \ref{fig:MecGrip} se muestra un diagrama esquemático de los elementos del mecanismo. 

\begin{figure}
\centering		
	\includegraphics[scale=0.3]{imagenes/MecanismoGripper.PNG}
	\caption{Elementos del mecanismo del gripper\cite{GripperOS}}
	\label{fig:MecGrip}
\end{figure}

El par de un actuador se aplica en $O_{1}$, donde el par $T_{a}$ genera un desplazamiento angular $\theta_{1}$. El resorte con módulo elástico $K$, ejerce una fuerza que mantiene el ángulo $\theta_{2}$ fijo. Cuando el eslabón $O_{1}-O_{2}$ se ve detenido en su movimiento, el par $T_{a}$ provoca una elongación en el resorte, lo que provoca un movimiento angular en $\theta_{2}$. Dicha secuencia es mostrada en la Figura \ref{fig:SecGrip}.

\begin{figure}
\centering		
	\includegraphics[scale=0.3]{imagenes/SecuenciaGripper.PNG}
	\caption{Secuencia de movimientos del mecanismo del gripper\cite{GripperOS}}
	\label{fig:SecGrip}
\end{figure}

En la Figura \ref{fig:GripperIEEE}a se muestra el ensamblaje de una falange con el mecanismo de actuación, que consiste en un tornillo sin fin más un engrane que transmite el movimiento al piñón que, unido al eslabón, transmite el par al mecanismo.


Según los resultados de las pruebas mostradas en la fuente\cite{GripperOS}, el efector es capaz de sujetar objetos con diversas geometrías. En la Figura \ref{fig:GripperIEEE}b, se puede observar que el objeto agarrado es una pelota de geometría esférica. Se busca que el agarre para la muestra de roca sea similar, sin embargo, la pelota tiene dimensiones mayores al tamaño propuesto en el requerimiento R2, como se puede apreciar en el diagrama simplificado mostrado en la Figura \ref{fig:GeoGripper}a, por lo que se propone un cambio de dimensiones en los ``dedos'' y la plataforma que funciona como ``palma''.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/DedoYEngranes.PNG}}
			{a) Ensamblaje de una falange del gripper}
		&
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/Balonxd.PNG}}
			{b) Agarre del gripper con una pelota esférica}
		\\
	\end{tabular}
	\caption{Gripper OPEN SOURCE publicado en IEEE\cite{GripperOS}}
	\label{fig:GripperIEEE}
\end{figure}

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Efector/Original1.pdf}}
			{a) Dedo original}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Efector/Modificado1.pdf}}
			{b) Dedo modificado}
		\\
	\end{tabular}
	\caption{Diagrama simplificado de un dedo y la muestra objetivo (5[cm])}
	\label{fig:GeoGripper}
\end{figure}

Después de realizar un análisis geométrico con el software Geogebra\textregistered , y comprobar varias opciones, se determinan las siguientes dimensiones: 1) Distancia del eje central de la palma al inicio de la falange: 2.5[cm], 2) Longitud de la primer falange: 6[cm], 3) Longitud de la segunda falange: 2.5[cm].

Con las dimensiones modificadas se aprecia que, aunque la palma no tenga contacto con la muestra, existe una mejora en el agarre de la misma, a la vez que se disminuye la probabilidad de golpear el suelo al disminuir la distancia necesaria para asegurar la sujeción. Esto se puede apreciar en la Figura \ref{fig:GeoGripper}b.

La distribución de los dedos del efector se pueden apreciar claramente en la vista superior del efector, mostrada en la Figura \ref{fig:EfectorCAD}a, mientras que el mecanismo subactuado se aprecia en la Figura \ref{fig:EfectorCAD}b.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/Dominio especifico/Efector/Efector superior.PNG}}
			{a) Distribución de los dedos del efector}
		&
		\subf{\includegraphics[width=0.3\textwidth, keepaspectratio]{imagenes/Dominio especifico/Efector/Efector lateral.PNG}}
			{b) Mecanismo subactuado}
		\\
	\end{tabular}
	\caption{Modelo CAD del efector final}
	\label{fig:EfectorCAD}
\end{figure}

Además de la modificación a las dimensiones, se agrega una placa deslizante que permite introducir un sensor de fuerza para determinar cuando la muestra es asegurada, de manera que no se ejerza una fuerza excesiva que resulte en un daño a la muestra o al efector, como se muestra en la Figura \ref{fig:EfectorSensores}.

\begin{figure}
\centering		
	\includegraphics[scale=0.4]{imagenes/Dominio especifico/Efector/Acoplamiento sensores.png}
	\caption{Ensamble de sensor de presión en la falange del efector}
	\label{fig:EfectorSensores}
\end{figure}

Para medir la fuerza ejercida por el efector a la muestra se opta por utilizar sensores de fuerza resistivos, ya que el espacio disponible para colocar el sensor es limitado y la delgadez de estos sensores los convierte en una opción adecuada.

El espacio está pensado para adaptarse a sensores de aproximadamente media pulgada de diámetro, por lo que el sensor FSR 402 es apropiado para los objetivos del proyecto.

Para transmitir la potencia al tornillo sin fin que actúa las falanges, se utiliza un buje de servo, mostrado en el Anexo \ref{An:PiezasMueca}.

El efector ensamblado se puede apreciar en la Figura \ref{fig:EfectorXD}a, y las piezas que lo componen en la vista explosionada de la Figura \ref{fig:EfectorXD}b.


\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[height=0.25\textheight, keepaspectratio]{imagenes/Dominio especifico/Efector/EfectorConActuador.png}}
			{a) Efector ensamblado}
		&
		\subf{\includegraphics[height=0.3\textheight, keepaspectratio]{imagenes/Dominio especifico/Efector/EfectorConActuadorEXP.png}}
			{b) Vista explosionada del efector}
		\\
	\end{tabular}
	\caption{Efector final}
	\label{fig:EfectorXD}
\end{figure}

\begin{flushright}
	Validación del efector rediseñado
\end{flushright}

Para comprobar que el efector tiene un rango de agarre por encima y debajo de la muestra ideal de [5cm] de diámetro, se realiza un análisis geométrico con piezas de 3[cm] y 7[cm], como se puede observar en la Figuras \ref{fig:AnGeo}a y \ref{fig:AnGeo}b respectivamente.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Efector/Modificado2.pdf}}
			{a) Muestra de 3[mm]}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Efector/Modificado3.pdf}}
			{b) Muestra de 7[mm]}
		\\
	\end{tabular}
	\caption{Análisis geométrico del agarre del efector con distintos diámetros de muestra}
	\label{fig:AnGeo}
\end{figure}


\subsubsection{Modelo matemático del sistema robótico}

\begin{flushright}
\textbf{\textit{Modelo cinemático}}

\textit{Cinemática directa}
\end{flushright}

Para abordar el problema de cinemática directa, primeramente se establecen marcos coordenados, que sirven como referencia para la posición y orientación de cada eslabón, de acuerdo a la convención de Denavit-Hartenberg, como se ve en la Figura \ref{fig:AsigMarcos}.

\begin{figure}
\centering		
	\includegraphics[scale=0.35]{imagenes/Dominio especifico/AsignacionMarcos.pdf}
	\caption{Asignación de los marcos de referencia a las articulaciones del robot}
	\label{fig:AsigMarcos}
\end{figure}

Para determinar la relación de posición y orientación del marco de referencia del efector final respecto al marco fijo $T_{0}^{6}$, se utilizan las matrices de transformación homogénea $A_{i}$, que relacionan la posición y orientación del marco de referencia $i$ respecto al marco $i-1$, construidas con la ecuación (\ref{eq:MTH}).

\begin{table}
\centering
\caption{Parámetros de Denavit-Hartenberg}
\begin{scriptsize}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
$i$  & $\theta$ & $d$  & $a$  & $\alpha$ & Offset \\ \hline
1  & $\theta_{1}$    & $o_{ff_{1}}$ & $o_{ff_{2}}$ & $\frac{\pi}{2}$  & 0      \\ \hline
2  & $\theta_{2}$    & 0  & $l_{1}$ & 0     & 0      \\ \hline
2' & $\theta_{3}$    & 0  & $l_{2}$ & $\frac{\pi}{2}$  & 0      \\ \hline
3  & $-\frac{\pi}{2}$ & 0  & 0  & $-\frac{\pi}{2}$ & 0      \\ \hline
4  & $\theta_{4}$    & 0  & 0  & $\frac{\pi}{2}$  & $\pi$     \\ \hline
5  & $\theta_{5}$    & 0  & 0  & $\frac{\pi}{2}$  & $\pi$     \\ \hline
6  & $\theta_{6}$    & $l_{3}$ & 0  & 0     & 0      \\ \hline
\end{tabular}
\end{scriptsize}
\label{tab:PDH}
\end{table}


Al sustituir los valores de los parámetros de Denavit-Hartenberg, indicados en la Tabla \ref{tab:PDH}, es posible calcular las matrices de transformación homogénea $A_{1}$ hasta $A_{6}$, las cuales, al posmultiplicarse, resultan en la matriz $T_{0}^{6}$:

\begin{figure}
\centering
	\begin{minipage}[b]{0.3\textwidth}
		$$
		A_{1} = 
		\begin{bmatrix}
		c_{1} & 0 & s_{1} & O_{2}c_{1}\\
		s_{1} & 0 & -c_{1} & O_{2}s_{1}\\
		0 & 1 & 0 & O_{1}\\
		0 & 0 & 0 & 1
		\end{bmatrix}
		$$
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.3\textwidth}
		$$
		A_{2} = 
		\begin{bmatrix}
		c_{2} & -s_{2} & 0 & l_{1}c_{2}\\
		s_{2} & c_{2} & 0 & l_{1}s_{2}\\
		0 & 0 & 1 & 0\\
		0 & 0 & 0 & 1
		\end{bmatrix}
		$$
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.3\textwidth}
		$$ 
		A_{2}' = 
		\begin{bmatrix} 
		c_{3} & 0 & s_{3} & l_{2}c_{3} \\
		s_{3} & 0 & -c_{3} & l_{2}s_{3} \\ 
		0 & 1 & 0 & 0 \\ 
		0 & 0 & 0 & 1 
		\end{bmatrix} 
		$$
	\end{minipage}
\end{figure}

\begin{figure}
	\small
	\centering
	\begin{minipage}[b]{0.2\textwidth}
		$$
		A_{3}  = 
		\begin{bmatrix} 
		0 & 0 & 1 & 0 \\ 
		-1 & 0 & 0 & 0 \\ 
		0 & -1 & 0 & 0 \\ 
		0 & 0 & 0 & 1 
		\end{bmatrix}  
		$$
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.2\textwidth}
		$$ 
		A_{4} = 
		\begin{bmatrix} 
		-c_{4} & 0 & -s_{4} & 0 \\ 
		-s_{4} & 0 & c_{4} & 0 \\ 
		0 & 1 & 0 & 0 \\ 
		0 & 0 & 0 & 1 
		\end{bmatrix}
		$$
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.2\textwidth}
		$$
		A_{5} = 
		\begin{bmatrix} 
		-c_{5} & 0 & -s_{5} & 0 \\
		-s_{5} & 0 & c_{5} & 0 \\
		0 & 1 & 0 & 0 \\ 
		0 & 0 & 0 & 1 
		\end{bmatrix}
		$$
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.2\textwidth}
		$$
		A_{6} = 
		\begin{bmatrix}
		c_{6} & -s_{6} & 0 & 0\\
		s_{6} & c_{6} & 0 & 0\\
		0 & 0 & 1 & l_{3}\\
		0 & 0 & 0 & 1\\
		\end{bmatrix}
		$$
	\end{minipage}
\end{figure}

\begin{flushright}
Validación del modelo cinemático
\end{flushright}

A forma de comprobación, los parámetros de Denavit-Hartenberg obtenidos se colocan en el toolbox \textit{``Robotics''} para MATLAB\textregistered , desarrollado por Peter Corke para simular sistemas robóticos (el código puede encontrarse en el Apéndice \ref{Ap:CodigoRoboCorke}), en el que se construye un modelo tridimensional del sistema en desarrollo, mostrado en la Figura \ref{fig:RoboCorke}, en donde se puede observar que la configuración formada por los parámetros de la Tabla \ref{tab:PDH} son congruentes con la configuración de la asignación de marcos de la Figura \ref{fig:AsigMarcos}. 

\begin{figure}
\centering		
	\includegraphics[scale=0.5]{imagenes/Dominio especifico/Validaciones eslabones/ROBOTNPG.png}
	\caption{Modelo tridimensional del sistema robótico desarrollado en el toolbox Robotics de Peter Corke para MATLAB\textregistered}
	\label{fig:RoboCorke}
\end{figure}

\begin{flushright}
\textit{Cinemática inversa}
\end{flushright}

Debido a que este manipulador robótico se compone de un brazo articulado de codo planar y una muñeca esférica, se aprovecha la capacidad que ofrece de desarrollar la cinemática inversa del brazo y la muñeca por separado, lo que se conoce como \textit{desacoplamiento cinemático}.

\textbf{Cinemática inversa del brazo articulado - Posición inversa.}

Para conocer los valores de las juntas pertenecientes al brazo articulado, es conveniente utilizar un enfoque geométrico, proyectando el centro de la muñeca esférica. La Figura  \ref{fig:Proyecciones}a muestra la proyección del centro de la muñeca en el plano $x_{0}-y_{0}$, permitiendo ver fácilmente el valor de $\theta_{1}$ como una relación entre las coordenadas $x_{c}$ y $y_{c}$ del centro de la muñeca, como se muestra en la ecuación (\ref{eq:T1}).

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/EsquemaT1.pdf}}
			{a) Plano XY}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Validaciones eslabones/EsquemaT2T3.pdf}}
			{b) Plano formado por los eslabones (XZ)}
		\\
	\end{tabular}
	\caption{Proyecciones del centro de la muñeca en distintos planos}
	\label{fig:Proyecciones}
\end{figure}



\begin{equation}
\label{eq:T1}
\theta_{1}=atan2\left(x_{c},y_{c}\right) 
\end{equation}


En donde $ \theta_{1} $ es el valor de la variable del primer grado de libertad.
%\\
%\\
%$\qquad \quad \qquad \rho_{e} \: \; =$ Densidad del eslabón.


Para encontrar el valor de $\theta_{2}$ y $\theta_{3}$, resulta de gran utilidad la Figura \ref{fig:Proyecciones}b.

En primer lugar, es importante considerar que existen dos desplazamientos entre las juntas como sigue:


\begin{align*}
r_{real} &= r_{total}-o_{ff_{2}} \\
s &= z_{c}-o_{ff{1}}
\end{align*}


Utilizando el teorema de Pitágoras, se calcula la longitud equivalente $l_{eq}$, para posteriormente obtener $\theta_{3}$ mediante la ley de cosenos.

\begin{align*}
l_{eq} &= \sqrt{r_{real}^{2}+s_{2}}\\
\cos \theta_{3} &= \frac{l_{eq}^{2}-l_{1}^{2}-l_{2}^{2}}{2l_{1}l_{2}}\\
&= \frac{(r-o_{ff_{2}})^{2} + s^{2} - l_{1}^{2} - l_{2}^{2}}{2l_{1}l_{2}}\\
&= \frac{(x_{c}^2 + y_{c}^2 -o_{ff_{2}})^{2} + (z_{c}-o_{ff{1}})^{2} - l_{1}^{2} - l_{2}^{2}}{2l_{1}l_{2}}:=D
\end{align*}

Dado que $ l_{eq}^{2} = (x_{c}^2 + y_{c}^2 -o_{ff_{2}})^{2} $ y $ s^{2} = z_{c}-o_{ff{1}} $. Entonces, $ \theta_{3} $ está dada por la ecuación (\ref{eq:T3}).

\begin{align}
\label{eq:T3}
\theta_{3} &= atan2\left(D,\pm\sqrt{1-D^{2}}\right)
\end{align}

En donde $ \theta_{3}  $ es el valor de la variable del tercer grado de libertad.


El hecho de que se tomen ambas raíces en la ecuación implica que son soluciones para la posición de \textbf{codo arriba} y \textbf{codo abajo}, para lo que finalmente se obtiene $ \theta_{2} $, definido por la ecuación (\ref{eq:T2}).


\begin{align*}
\theta_{2} &= atan2\left(r_{real},s\right) - atan2\left(l_{1} + l_{2}c_{3}, l_{2}s_{3}\right)
\end{align*} 

\begin{align}
\label{eq:T2}
\theta_{2} &= atan2\left(\sqrt{x_{c}^2 + y_{c}^2 -o_{ff_{2}}}, z_{c}-o_{ff{1}}\right) - atan2\left(l_{1} + l_{2}c_{3}, l_{2}s_{3}\right)
\end{align}

En donde: $ \theta_{2} $ es el Valor de la variable del segundo grado de libertad.

\textbf{Cinemática inversa de la muñeca esférica - Orientación inversa.}

Para obtener los tres grados de libertad faltantes, pertenecientes a la orientación de la muñeca, resulta útil resolver la ecuación (\ref{eq:R06Pieper}).

La matriz simbólica $R_{6}^{3}$ es la siguiente:

%\label{eq:R36Sim}
\begin{align*}
R_{6}^{3} = 
\left[
\begin{array}{ccc}
c_{4} c_{5} c_{6}-s_{4} s_{6} & -s_{4} c_{6}-s_{6} c_{4} c_{5} & s_{5} c_{4} \\
s_{4} c_{5} c_{6}+s_{6} c_{4} & c_{4} c_{6}-s_{4} s_{6} c_{5} & s_{4} s_{5} \\
-s_{5}c_{6} & s_{5} s_{6} & c_{5}
\end{array}
\right]
\end{align*}

\begin{align}
\label{eq:R03}
R_{3}^{0} = 
\left[
\begin{array}{ccc}
-s_{1} & -s_{23} c_{1} & c_{1} c_{23} \\
c_{1} & -s_{1} s_{23} & s_{1} c_{23} \\
0 & c_{23} & s_{23}
\end{array}
\right]
\end{align}

Para construir $\left(R_{3}^{0}\right)^{T}R$ se utilizan las ecuaciones (\ref{eq:RTarget}) y (\ref{eq:R03}), resultando en:

\begin{align*}
R_{6}^{3} &= 
\left[
\begin{array}{ccc}
r_{21} c_{1}-r_{11} s_{1} & 
r_{22} c_{1}-r_{12} s_{1} &
r_{23} c_{1}-r_{13} s_{1} \\
-r_{11} s_{23} c_{1}-r_{21} s_{1} s_{23}+r_{31} c_{23} &
-r_{12} s_{23} c_{1}-r_{22} s_{1} s_{23}+r_{32} c_{23} &
-r_{13} s_{23} c_{1}-r_{23} s_{1} s_{23}+r_{33} c_{23} \\
r_{11} c_{1} c_{23}+r_{21} s_{1} c_{23}+r_{31} s_{23} &
r_{12} c_{1} c_{23}+r_{22} s_{1} c_{23}+r_{32} s_{23} &
r_{13} c_{1} c_{23}+r_{23} s_{1} c_{23}+r_{33} s_{23}
\end{array}
\right]
\end{align*}

Resolviendo para $\theta_{4}$, $\theta_{5}$ y $\theta_{6}$ como sigue.

\begin{align}
\label{eq:T5}
\theta_{5} &= atan2\left(
r_{13}c_{1}c_{23}+r_{23}s_{1}c_{23}+r_{33}s_{23},
\pm\sqrt{1-\left(r_{13}c_{1}c_{23}+r_{23}s_{1}c_{23}+r_{33}s_{23}\right)^{2}}
\right)
\end{align}

\begin{align}
\label{eq:T4}
\theta_{4} &= atan2\left(
\pm\sqrt{s_{5}^{2}-\left(r_{33}c_{23}-r_{13}c_{1}s_{23}-r_{23}s_{1}s_{23}\right)^{2}},
r_{33}c_{23}-r_{13}c_{1}s_{23}-r_{23}s_{1}s_{23}
\right)
\end{align}

\begin{align}
\label{eq:T6}
\theta_{6} &= atan2\left(
\pm\sqrt{s_{5}^{2}-\left(r_{12}c_{1}c_{23}+r_{22}s_{1}c_{23}+r_{32}s_{23}\right)^{2}},
r_{12}c_{1}c_{23}+r_{22}s_{1}c_{23}+r_{32}s_{23}
\right)
\end{align}

\begin{flushright}
\textit{Jacobiano}
\end{flushright}

En esta sección se derivan las relaciones de velocidad entre las velocidades lineal y angular del efector final con respecto a las velocidades de las juntas.

%begin{figure}
%	\centering
%	\begin{minipage}[b]{\textwidth}
%		
%	\end{minipage}
%	%hfill
%end{figure}

\begin{figure}
	\centering
	\begin{minipage}[b]{\textwidth}
		\begin{align*}
		J_{1} = 
		\left[
		\begin{array}{c}
		-l_1 s_{1} c_{2}-l_2 s_{1} c_{23}-l_3 \left(s_{1} c_{23} c_{5}+s_{5} \left(c_{1} c_{4}-s_{1} s_{23} s_{4}\right)\right)-O_2 s_{1} \\
		l_1 c_{1} c_{2}+l_2 c_{1} c_{23}+l_3 \left(c_{1} c_{23} c_{5}-s_{5} \left(s_{1} c_{4}+c_{1} s_{23} s_{4} \right)\right)+O_2 c_{1} \\
		0 \\
		0 \\
		0 \\
		1
		\end{array}
		\right]
		\end{align*}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.3\textwidth}
		\begin{align*}
		J_{2} =
		\left[
		\begin{array}{c}
		-c_{1} \left(l_1 s_{2}+l_3 s_{4} s_{5} c_{23}+s_{23} \left(l_3 c_{5}+l_2\right)\right) \\
		-s_{1} \left(l_1 s_{2}+l_3 s_{4} s_{5} c_{23}+s_{23} \left(l_3 c_{5}+l_2\right)\right) \\
		l_1 c_{2} -l_3 s_{23} s_{4} s_{5}+c_{23} \left(l_3 c_{5}+l_2\right) \\
		s_{1} \\
		-c_{1} \\
		0 
		\end{array}
		\right]
		\end{align*}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.3\textwidth}
		\begin{align*}
			J_{3} =
			\left[
			\begin{array}{c}
			 -c_{1} \left(l_3 s_{4} s_{5} c_{23}+s_{23} \left(l_3 c_{5}+l_2\right)\right) \\
			 -s_{1} \left(l_3 s_{4} s_{5} c_{23}+s_{23} \left(l_3 c_{5}+l_2\right)\right) \\
			 -l_3 s_{4} s_{5} s_{23} + c_{23} \left(l_3 c_{5}+l_2\right) \\
			 s_{1} \\
			 -c_{1} \\
			 0 
			 \\
			\end{array}
			\right]
		\end{align*}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.3\textwidth}
		\begin{align*}
			J_{4} =
			\left[
			\begin{array}{c}
			 l_3 s_{5} \left(s_{1} s_{4} - c_{1} s_{23} c_{4}\right) \\
			 -l_3 s_{5} \left(c_{1} s_{4} + s_{1} s_{23} c_{4}\right) \\
			 l_3 s_{5} c_{23} c_{4} \\
			 c_{1} c_{23} \\
			 s_{1} c_{23} \\
			 s_{23} 
			\end{array}
			\right]
		\end{align*}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.4\textwidth}
		\begin{align*}
			J_{5} =
			\left[
			\begin{array}{c}
			 -l_3 \left(s_{1} c_{4} c_{5}+c_{1} \left(s_{23} s_{4} c_{5}+s_{5} c_{23}\right)\right) \\
			 l_3 \left(c_{1} c_{4} c_{5}-s_{1} \left(s_{23} s_{4} c_{5}+s_{5} c_{23}\right)\right) \\
			 l_3 \left(s_{4} c_{23} c_{5}-s_{23} s_{5}\right) \\
			 s_{1} s_{4} - c_{1} s_{23} c_{4} \\
			 -c_{1}s_{4} - s_{1} s_{23} c_{4} \\
			 c_{23} c_{4} 
			\end{array}
			\right]
		\end{align*}
	\end{minipage}
	\hfill
	\begin{minipage}[b]{0.4\textwidth}
		\begin{align*}
			J_{6} =
			\left[
			\begin{array}{c}
			 0 \\
			 0 \\
			 0 \\
			 c_{1} c_{23} c_{5}-s_{5} \left(s_{1} c_{4}+c_{1} s_{23} s_{4} \right) \\
			 s_{1} c_{23} c_{5}+s_{5} \left(c_{1} c_{4}-s_{1} s_{23} s_{4}\right) \\
			 s_{23} c_{5}+s_{4} s_{5} c_{23} 
			\end{array}
			\right]
		\end{align*}
	\end{minipage}
\end{figure}


\begin{align}
\label{eq:Jacobiano}
J = \left[ \begin{array}{c|c|c|c|c|c}
J_{1} & J_{2} & J_{3} & J_{4} & J_{5} & J_{6}
\end{array} \right]
\end{align}

\textbf{Jacobiano para singularidades}

Con el fin de realizar el desacoplamiento de singularidades, se construye un Jacobiano de la forma:

\begin{align}
J_{i} &= \begin{bmatrix}
 z_{i-1} \times (o_{3}-o_{i-1})\\   z_{i-1} 
\end{bmatrix}
\label{eq:JacSing}
\end{align}

Las singularidades se calculan con la ecuación (\ref{eq:detJ}), quedando como sigue:

\begin{align}
\label{eq:ArmSing}
det J_{11} = -l_1 l_2 s_{3} \left(l_1 c_{2}+l_2 c_{23}+O_2\right)
\end{align}

\begin{align}
\label{eq:WristSing}
det J_{22} = -s_{5}
\end{align}

De \ref{eq:ArmSing}, se puede observar que las singularidades del brazo se presentan cuando

\begin{align*}
\theta_{3} &= 0\\
l_1 c_{2}+l_2 c_{23}+O_2 &= 0
\end{align*}

Mientras que de \ref{eq:WristSing} se obtiene la singularidad de la muñeca esférica, que se presenta cuando $$\theta_{5} = 0$$.

Lo que implica que dos de sus ejes están alineados, provocando que el Jacobiano pierda rango y existan infinitas soluciones para un solo valor de posición.

El control se desarrolla en la implementación. 

\subsection{Sistema de Información (S2)}
\subsubsection{Módulo de percepción (M3)}

\begin{flushright}
\textit{Condiciones de operación}
\end{flushright}
Para asegurar que el sistema trabaja en condiciones seguras de operación, es necesario determinar los parámetros del ambiente, para que el sistema se desactive en cuando alguno de ellos no cumpla con los valores establecidos por los requerimientos (R11 y R12).

Dado que el sistema puede verse afectado por las condiciones de temperatura y humerar del entorno, es necesario conocer las condiciones de temperatura y humedad a las que está expuesto, para ello se recurre a un sensor que permita conocer estos parámetros, para los cuales existe una amplia variedad en el mercado, destacando entre ellos el DHT11 (Anexo \ref{An:DHT11}) por su popularidad, lo que lo convierte en un componente de fácil adquisición y uso, y dado que su rango de operación cumple con los requerimientos, es seleccionado. Estos deben colocarse en los puntos más propensos al calentamiento por radiación solar, aire caliente por convección, o por calentamiento propio, los cuales son: los actuadores, los circuitos electrónicos y el sistema de alimentación, por lo que deben ser monitoreados.

\begin{flushright}
\textit{Visión artificial}
\end{flushright}

El objetivo de la visión artificial es obtener las coordenadas de la muestra en el espacio. Para lograr esto se utilizan 2 cámaras Ardu-CAM, las cuales se colocan a una distancia conocida con el objetivo de implementar un algoritmo de homografía para corregir la perspectiva y, de esta manera, calcular la posición de la muestra por medio de estereopsis.

\subsubsection{Módulo de comunicación (M4)}

Dado que el sistema involucra varios agentes que intercambian datos entre sí, es necesario identificar la forma en que interactúan. Esta interacción está ilustrada en la Figura \ref{fig:ComDiag}. Debido a que estos componentes forman parte de diferentes sistemas, la unión de ellos se realiza en el capítulo ``Integración''.

\begin{figure}
\centering		
	\includegraphics[scale=0.5]{imagenes/Dominio especifico/Comunicacion/Comunicacion diagrama.pdf}
	\caption{Diagrama de comunicación entre módulos}
	\label{fig:ComDiag}
\end{figure}

Con ayuda de este diagrama, se determinan los requerimientos de comunicación, mostrados en la Tabla \ref{Tab:ElementosComunicacion}, que serán útiles para diseñar los circuitos y elegir el microcontrolador adecuado.

\begin{flushright}
\textit{Comunicación interna}
\end{flushright}

Los componentes electrónicos deben interactuar entre sí para lograr que el sistema mecatrónico realice su función, en la Tabla \ref{Tab:ElementosComunicacion} se muestra la forma en que cada uno de ellos maneja su información.

\begin{table}
\centering
\caption{Requerimientos de comunicación}
\begin{scriptsize}
\begin{tabular}{|c|c|c|}
\hline
Elemento                   & Numero de terminales & Tipo      \\ \hline
Servomotor (x5)            & 1                    & PWM       \\ \hline
Motor CD (x3)              & 1                    & PWM       \\ \hline
Encoder (x3)               & 2                    & Digital   \\ \hline
Sensor de temperatura (x3) & 1                    & 1-wire    \\ \hline
Módulo de celda de carga   & 1                    & Serial    \\ \hline
Sensores de fuerza (x3)    & 1                    & Analógico \\ \hline
Camara (x2)                & 2                    & SPI       \\ \hline
Computadora                & 2                    & UART      \\ \hline
\end{tabular}
\end{scriptsize}
\label{Tab:ElementosComunicacion}
\end{table}

\begin{flushright}
\textit{Comunicación con el usuario}
\end{flushright}

Para interactuar con el usuario, se plantea utilizar una interfaz gráfica, como la que se ve en la Figura \ref{fig:FrontEnd}, que cuenta con los elementos siguientes:

\begin{itemize}[noitemsep,nolistsep]
\item Botón de activación y desactivación, además cuando se cierre la aplicación se realiza la comprobación del estado del sistema, si se encuentra activo, envía el brazo a la posición de reposo y lo desactiva.
\item La imagen del entorno obtenida por el sistema de visión, mostrada al usuario en la parte central para que este identifique la ubicación de la muestra de interés.
\item Botón de corrección de selección, en caso de que el usuario desee cambiar la muestra de interés
\item Información del sistema dependiendo del resultado de la operación, si la función principal se realizó con éxito, mostrará los parámetros obtenidos de la muestra, en caso contrario, enviará un mensaje de error.
\end{itemize}

\begin{figure}
\centering		
	\includegraphics[width=\textwidth]{imagenes/Dominio especifico/Comunicacion/FrontEnd.png}
	\caption{Elementos básicos de la interfaz de usuario}
	\label{fig:FrontEnd}
\end{figure}

\subsubsection{Módulo de procesamiento (M5)}

Para seleccionar un sistema de procesamiento adecuado, es necesario tomar en cuenta lo siguiente\cite{GUIARM}

\begin{enumerate}[noitemsep,nolistsep]
\item Determinar interfaces de hardware necesarias.
\item Seleccionar la arquitectura adecuada de acuerdo a las necesidades.
\item Determinar restricciones de costo y energía.
\item Comprobar disponibilidad.
\item Determinar el entorno de desarrollo integrado (IDE por sus siglas en inglés \textit{Integrated Development Environment}) en el que se desarrolla el código para el microcontrolador.
\end{enumerate}

Las interfaces de hardware se encuentran enlistadas en la Tabla \ref{Tab:ElementosComunicacion}.

El hecho de implementar la comunicación, lectura de datos y el control de posición de motores, significa que la aplicación requiere realizar operaciones complejas, en las que se incluyen las operaciones de punto flotante, por lo que la arquitectura de 32 bits tiene ventajas claras antes las arquitecturas de 8 y 16 bits.

En la Figura \ref{fig:ARMProc}, proporcionada por el fabricante ARM\cite{ARMCM}, se pueden apreciar las diferentes familias de procesadores disponibles, especificando las aplicaciones típicas para cada una, lo cual se revisa con más detalle en la Tabla \ref{Tab:ARMSum}.

\begin{figure}
\centering		
	\includegraphics[scale=0.7]{imagenes/Dominio especifico/Comunicacion/ARMProc.pdf}
	\caption{Familia de procesadores ARM, ARM}
	\label{fig:ARMProc}
\end{figure}

\begin{table}
\centering
\begin{scriptsize}
\caption{Características de los procesadores ARM, STM}
\begin{tabular}{c|c|c|c|}
\cline{2-4}
                                                                                                	& Procesadores de aplicación movil                                                                                                                              	& Procesadores en tiempo real                                                                                                                  	& Microcontroladores                                                                                                                                                                        	\\ \hline
\multicolumn{1}{|c|}{Diseño}                                                                    	& \begin{tabular}[c]{@{}c@{}}Alta frecuencia de reloj,\\ Pipeline larga,\\ Alto desempeño,\\ Soporte multimedia\end{tabular}                                    	& \begin{tabular}[c]{@{}c@{}}Alta frecuencia de reloj,\\ Pipeline de media a larga\\ Determinista (baja latencia\\  de interrupción)\end{tabular}  & \begin{tabular}[c]{@{}c@{}}Ultra baja potencia,\\ Determinista (Baja latencia\\ de interrupción\\ Pipeline corta\end{tabular}                                                             	\\ \hline
\multicolumn{1}{|c|}{\begin{tabular}[c]{@{}c@{}}Caracte-\\ rísticas \\ del \\ sistema\end{tabular}} & \begin{tabular}[c]{@{}c@{}}Unidad de administración de\\ memoria, memoria cache, \\ Seguridad ``ARM TrustZone R''\end{tabular}                                  	& \begin{tabular}[c]{@{}c@{}}Unidad de protección de \\ memoria, memoria cache, \\ Memoria estrechamente \\ acoplada\end{tabular}              	& \begin{tabular}[c]{@{}c@{}}Unidad de protección de \\ memoria, \\ Control de interrupciones \\ anidado y vectorizado, \\ Controlador de despertador.\end{tabular}                         	\\ \hline
\multicolumn{1}{|c|}{\begin{tabular}[c]{@{}c@{}}Mercado\\ objetivo\end{tabular}}                	& \begin{tabular}[c]{@{}c@{}}Cómputo móvil, teléfonos\\ inteligentes.\\ Servidores energéticamente \\ eficientes, \\ Microprocesadores de gama \\ alta\end{tabular} & \begin{tabular}[c]{@{}c@{}}Microcontroladores\\ industriales, automotrices, \\ Controladores de disco duro, \\ modems de linea base\end{tabular} & \begin{tabular}[c]{@{}c@{}}Microcontroladores,\\ sistemas profundamente\\ embebidos (e.g sensores, \\ MEMS, circuitos integrados \\ de señal mezclada), \\ Internet de las cosas\end{tabular} \\ \hline
\end{tabular}
\label{Tab:ARMSum}
\end{scriptsize}
\end{table}

De acuerdo a esto, se selecciona la tarjeta de desarrollo STM32F446RE (Anexo \ref{An:Nucleo}), pues cumple con las características necesarias y ya se cuenta con ella. Así mismo, existe un IDE en línea específico para estas tarjetas, denominado mbed Compiler \cite{mbedCompiler}, el cual es desarrollado por el fabricante de las mismas.


\subsection{Sistema energético (S3)}

Para conocer los requerimientos energéticos del sistema, debe identificarse cuanta energía consumen los elementos que lo conforman.

De acuerdo al modelo eFFBD, mostrado en la Figura \ref{fig:eFFBD}, es posible separar a los elementos de sistema en dos grupos con base en el tiempo que están activos, estos grupos se muestran en la Tabla \ref{Tab:ConsumoGeneral}.

\begin{table}[]
\centering
\begin{scriptsize}
\caption{Consumo energético de los componentes}
\begin{tabular}{|c|c|c|c|c|}
\hline
Componente               	& Voltaje [V] & \multicolumn{1}{l|}{\begin{tabular}[c]{@{}l@{}}Corriente \\ en reposo [A]\end{tabular}} & \begin{tabular}[c]{@{}c@{}}Corriente \\ promedio [A]\end{tabular} & \begin{tabular}[c]{@{}c@{}}Corriente \\ máxima [A]\end{tabular} \\ \hline
\multicolumn{5}{|c|}{Operación continua}                                                                                                                                                                                                               	\\ \hline
Sensor de fuerza (x3)         	& 5   	& 0.5 $\mu$ 	& -                                                         	& 0.005                                                   	\\ \hline
Módulo ADC de celda de carga & 5   	& 1 $\mu$ 	& 0.0015                                                    	& 0.0015                                                  	\\ \hline
Tarjeta de procesamiento 	& 5 	& 0.0512                                                                          	& 0.081                                                     	& 0.120                                                   	\\ \hline
Sensor de temperatura (x3)    	& 5   	& 150 $\mu$ 	& 0.0025                                                    	& 0.0025                                                  	\\ \hline
Encoder (x3)                   	& 5   	& 0.002                                                                           	& 0.002                                                     	& 0.005                                                   	\\ \hline
\multicolumn{5}{|c|}{Operación intermitente}                                                                                                                                                                                                           	\\ \hline
Motor reductor CD (x3)        	& 12  	& -                                                                               	& 7.73                                                      	& 20                                                      	\\ \hline
Servomotor (x5)              	& 7.6 	& -                                                                               	& 1.43                                                      	& 3                                                       	\\ \hline
Camara (x2)                  	& 5   	& -                                                                               	& 0.390                                                     	& 0.390                                                   	\\ \hline
\end{tabular}
\label{Tab:ConsumoGeneral}
\end{scriptsize}
\end{table}

Con esta información, el consumo mínimo del sistema cuando se encuentra en reposo es de $57.65$ [mA], mientras que la corriente máxima requiere tomar en cuenta que sólo se mueve un actuador a la vez para evitar picos de corriente y aceleraciones de Coriolis, mientras que los otros solo consumen la corriente mínima para mantener su posición, de esta manera el caso de consumo máximo se asocia al motor del primer eslabón, pues es el que debe generar un mayor par (11.145[Nm]), resultando en un consumo de $24.768$ [A]. Estos valores se obtienen de acuerdo a las siguientes ecuaciones:

\begin{align*}
i_{reposo} &= 57.6545 [mA]\\
i_{m\acute{a}xima} &= 20.48[A]\\
\end{align*}

Por esto, se selecciona una fuente que sea capaz de suministrar esta cantidad de energía, utilizando el árbol de decisión mostrado en el Apéndice \ref{ApA3:Fuente}. De este proceso de selección quedan 2 fuentes que cumplen con los criterios (S-350-12\cite{FUENTE350} y S-500-12\cite{FUENTE500} del fabricante Yueqing Mingwei Electric Co. Ltd.), sin embargo se selecciona el modelo S-500-12, ya que aunque cuesta 10 USD más, tiene varias ventajas como mayor suministro de corriente (11[A]) y protección contra altas temperaturas.

\subsubsection{Acondicionamiento}

Según la Tabla \ref{Tab:ConsumoGeneral}, existen 3 niveles distintos de tensión requeridos por los elementos (los cuales son 5, 7.6 y 12[V]), por lo tanto deben diseñarse circuitos que adapten el valor de tensión de la fuente a estos valores.

De acuerdo a la Tabla \ref{Tab:Reguladores} los reguladores conmutados son una buena opción para aplicaciones de alta potencia, sin embargo, también menciona que son muy complejas de construir, por ello se buscan modelos en el mercado que cumplan las características mínimas de acuerdo a cada nivel de tensión, como sigue: 12[V], que no requiere convertidor, 7.6[V], $7.15[A]$ y 5[V]: $0.939[A]$.

El único proveedor con precios accesibles es RobotShop, por lo que los componentes seleccionados son:  7.6[V] a 7.15[A] es la 2xGS2678 de DFRobot en paralelo para sumar corrientes (cada uno suministra 5[A]) y el de 5[V] a 0.939[A]: S9V11F3S5 de Pololu.

\subsubsection{Distribución}

Con ayuda de la Figura \ref{fig:CableCalibre} se determina el calibre mínimo necesario para los cables que transmiten la energía de los actuadores y, debido a que los servomotores consumen menos corriente que los motores de CD, se utiliza el mismo calibre.

\begin{enumerate}[noitemsep,nolistsep]
\item Corriente máxima que fluye por el cable: 20A
\item Tipo de circuito: Crítico
\item Longitud de cable: $<$2[m]
\item Calibre necesario: 14
\end{enumerate}

En cuanto al cable que se conecta a la red eléctrica debe transmitir menos de 6[A], como indica la hoja de datos de la fuente, y tiene una longitud de aproximadamente 9m, por lo que el calibre necesario es 12.

\begin{figure}
	\centering		
	\includegraphics[scale=1]{imagenes/Marco Teorico/CalibreCable}
	\caption{Extracto de la guía de selección para calibre de cables\cite{CablEner}}
	\label{fig:CableCalibre}
\end{figure}

\subsection{Sistema del laboratorio (S4)}
Recordando de la Tabla \ref{Tabla:TrazaMod}, el laboratorio debe obtener datos de la muestra (f3.3),  comunicarlos al usuario (f3.2.1) y devolver la muestra al ambiente (f1.4). A continuación se desarrolla el diseño de los módulos destinados a cumplir dichas funciones, los cuales son el módulo de obtención de datos (M6) y el desechador (M7).

El concepto mejorado (Figura \ref{fig:ConceptoMejorado}) comprende un cono trunco que aumenta la superficie en donde el sistema robótico (S1) puede depositar la muestra, además de que la pendiente del mismo sirve para permitir que la muestra se deslice suavemente hacia el área de obtención de datos, reduciendo la magnitud de la fuerza con la que impacta la superficie. Mientras que el desechador consiste en una base móvil que, una vez que es retirada, deja caer la muestra. 

Las celdas de carga están diseñadas específicamente para la medición de masa y existe en el mercado variedad de opciones con capacidades y sensibilidades distintas. 

De acuerdo a la ecuación (\ref{eq:CelSel}), presente en la guía de selección de celdas de carga \cite{CeldaCarga}, una capacidad de 0.95 kg es adecuada para cumplir con el requerimiento de masa establecido (R8 con factor de seguridad de 2). Por ello se decide usar la celda con una capacidad de 1 Kg.

\begin{align}
\label{eq:CelSel}
Capacidad &= \frac{(Ic*L+L0)*Lec*Lic}{Nc}
\end{align}

En dónde $ Ic $ es el coeficiente de impacto, $L$ es la carga máxima a medir, $ L0 $ es la carga inicial (Peso de la superficie de medición), $ Lec $ es el coeficiente de excentricidad de carga, $ Lic $ coeficiente de desbalance de carga, $ Nc $ numero de celdas de carga a utilizar. 

\begin{align*}
Capacidad &= \frac{(1.5*0.5+0.03)*1.2*1}{1}=0.95 Kg
\end{align*}

El contenedor de la muestra con forma de cono trunco de la Figura \ref{fig:ConceptoMejorado} se rediseña para asemejar a un embudo, con el objetivo de aumentar la superficie de sujeción, pues un círculo solo tiene puntos tangentes, mientras que la geometría mostrada en la Figura \ref{fig:PiezasLab}a puede sujetarse en un extremo.

Para la manufactura de esta pieza, la manufactura aditiva resulta muy complicado por sus dimensiones, siendo una solución simple el uso de un polímero rígido para la parte plana (PVC), y un polímero semiflexible para la parte curva (PET), puesto que la primera se une a la estructura y soporta el mecanismo de desecho, mientras que la última debe adoptar una geometría curva.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Laboratorio/Cono.png}}
			{a) Contenedor de la muestra}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Laboratorio/SupMedicion.png}}
			{b) Superficie de medición}
		\\
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Laboratorio/Laboratorio_Isometrico_Posterior.png}}
			{c) Mecanismo de desecho}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Laboratorio/LaboratorioLateral.png}}
			{d) Vista lateral del laboratorio}
		\\
	\end{tabular}
	\caption{Piezas de laboratorio}
	\label{fig:PiezasLab}
\end{figure}

Como se ve en la Figura \ref{fig:PiezasLab}b, la superficie de medición es una pieza sencilla, ya que solamente se encarga de soportar la muestra durante el proceso de pesado, por lo que se acopla sobre la celda de carga.

Finalmente, el mecanismo desechador consta de un actuador que remueve la superficie de medición para que la muestra caiga. El actuador se acopla al costado del embudo contenedor, como se muestra en la Figura \ref{fig:PiezasLab}c.

El actuador es un servomotor estándar MG1501, pues solo debe alcanzar dos posiciones (posición de medición y posición de desecho).

Este motor se acopla al contenedor con una cubierta comercial ASBI24, mientras que el eje transmite el movimiento a través de un cople fijado a una plataforma sobre la que se coloca la celda de carga.

La distribución de estos módulos se puede apreciar fácilmente con la ayuda de la vista lateral, mostrada en la Figura \ref{fig:PiezasLab}d.


Finalmente, los módulos que conforman el laboratorio pueden observarse en la Figura \ref{fig:Laboratorio}a, mientras que el ensamble completo se muestra en la Figura \ref{fig:Laboratorio}b.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Laboratorio/Laboratorio_Explosionado.png}}
			{a) Vista explosionada}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Laboratorio/Laboratorio_Isometrico.png}}
			{b) Vista ensamblada}
		\\
	\end{tabular}
	\caption{Laboratorio}
	\label{fig:Laboratorio}
\end{figure}


\subsubsection{Validación}

Para determinar que los elementos que conforman la superficie de medición mantienen su integridad estructural, se realiza un estudio dinámico no lineal en el software SolidWorks \cite{SolidWorks} para conocer los efectos del impacto de la muestra cuando se deja caer.

El estudio se realiza tomando en cuenta las siguientes características

\begin{itemize}[noitemsep,nolistsep]
\item Material: ABS
\item Velocidad de impacto: 10 [m/s] exagerando la altura a la que se deja caer. (5[m])
\item Masa de la muestra: 1[Kg]
\end{itemize}

\begin{figure}
\centering		
	\includegraphics[scale=0.35]{imagenes/Dominio especifico/Laboratorio/Lab_Impacto.png}
	\caption{Análisis dinámico de impacto de la muestra sobre la superficie de medición del laboratorio}
	\label{fig:PutazoLab}
\end{figure}

El estudio mostrado en la Figura \ref{fig:PutazoLab} indica que la mayor parte del impacto es absorbida por esta pieza en lugar de ser absorbida por el ABS, y dado que la celda de carga está hecha de aluminio, es seguro concluir que el material no falla.

\subsection{Sistema estructural (S5)}

La estructura del vehículo tipo \textit{rover} en el que el sistema se pretende montar está construida con perfil de aluminio IPS de 20x20 [mm].

La estructura básica debe ser reproducida para el banco de pruebas, el cual consiste en una base fija, por lo que se omite el uso de las ruedas.

Para reducir costos y tiempo de manufactura, se eliminan las partes de la estructura que no sostienen a ningún elemento del sistema, como se aprecia en la Figura \ref{fig:BancoPruebas}a y \ref{fig:BancoPruebas}b.

\begin{figure}
	\centering
	\begin{tabular}{cc}
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Estructura/Estructura.png}}
			{a) Diseño original}
		&
		\subf{\includegraphics[width=0.45\textwidth, keepaspectratio]{imagenes/Dominio especifico/Estructura/Estructura_modificadaxd.png}}
			{b) Diseño modificado}
		\\
	\end{tabular}
	\caption{Estructura del banco de pruebas}
	\label{fig:BancoPruebas}
\end{figure}